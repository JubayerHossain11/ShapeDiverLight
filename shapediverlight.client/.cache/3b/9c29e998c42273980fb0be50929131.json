{"id":"sqC7","dependencies":[{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.data-engine.geometry-engine\\dist\\GeometryEngine.js.map","includedInParent":true,"mtime":1706476152351},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.data-engine.geometry-engine\\src\\GeometryEngine.ts","includedInParent":true,"mtime":1706476152605},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\package.json","includedInParent":true,"mtime":1706476652643},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.data-engine.geometry-engine\\package.json","includedInParent":true,"mtime":1706476151913},{"name":"@shapediver/viewer.shared.services","loc":{"line":13,"column":41,"index":844},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.data-engine.geometry-engine\\dist\\GeometryEngine.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.shared.services\\dist\\index.js"},{"name":"./gltfv1/GLTFLoader","loc":{"line":14,"column":29,"index":913},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.data-engine.geometry-engine\\dist\\GeometryEngine.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.data-engine.geometry-engine\\dist\\gltfv1\\GLTFLoader.js"},{"name":"./gltfv2/GLTFLoader","loc":{"line":15,"column":29,"index":967},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.data-engine.geometry-engine\\dist\\GeometryEngine.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.data-engine.geometry-engine\\dist\\gltfv2\\GLTFLoader.js"}],"generated":{"js":"\"use strict\";var e=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.GeometryEngine=void 0;const t=require(\"@shapediver/viewer.shared.services\"),n=require(\"./gltfv1/GLTFLoader\"),i=require(\"./gltfv2/GLTFLoader\");class o{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._httpClient=t.HttpClient.instance,this._loadingQueue=[],this._logger=t.Logger.instance,this._performanceEvaluator=t.PerformanceEvaluator.instance,this._loadingQueueLength=1/0}static get instance(){return this._instance||(this._instance=new this)}get parallelGlTFProcessing(){return this._loadingQueueLength}set parallelGlTFProcessing(e){this._loadingQueueLength=e}loadContent(o,r){return e(this,void 0,void 0,function*(){if(!o||o&&!o.href)throw new t.ShapeDiverViewerDataProcessingError(\"GeometryEngine cannot load content.\");for(;this._loadingQueueLength<=this._loadingQueue.length;)yield new Promise(e=>setTimeout(e,10));const s=o.href,a=new Promise((a,c)=>e(this,void 0,void 0,function*(){let e,l,d,h,g,u=\"2.0\";if(\"glb\"===o.format||\"gltf\"===o.format){this._performanceEvaluator.startSection(\"gltfProcessing.\"+s),this._performanceEvaluator.startSection(\"loadGltf.\"+s);const n=yield this._httpClient.get(s,{responseType:\"arraybuffer\"});this._performanceEvaluator.endSection(\"loadGltf.\"+s);const i=(new TextDecoder).decode(new Uint8Array(n.data,0,4));if(\"glTF\"===i){l=n.data;const o=new DataView(l,0,this.BINARY_EXTENSION_HEADER_LENGTH);if(\"glTF\"!=(h={magic:i,version:o.getUint32(4,!0),length:o.getUint32(8,!0),contentLength:o.getUint32(12,!0),contentFormat:o.getUint32(16,!0)}).magic)throw new t.ShapeDiverViewerDataProcessingError(\"Invalid data: glTF magic wrong.\");const r=new DataView(l,this.BINARY_EXTENSION_HEADER_LENGTH,h.contentLength),s=(new TextDecoder).decode(r);if((e=JSON.parse(s))&&e.asset&&e.asset.version){const n=(e.asset.version+\"\").endsWith(\".0\")?e.asset.version:e.asset.version+\".0\";if(h.version+\".0\"!==n)throw new t.ShapeDiverViewerDataProcessingError(\"GeometryEngine.loadContent: glTF header version (\"+h.version+\") is not the same as asset version (\"+n+\").\");u=h.version+\".0\"}else u=h.version+\".0\"}else{if((e=JSON.parse((new TextDecoder).decode(n.data)))&&e.asset&&e.asset.version){if(\"2.0\"!==e.asset.version)throw new t.ShapeDiverViewerDataProcessingError(\"GeometryEngine.loadContent: Only gltf v2 is supported in a non-binary format.\")}else this._logger.warn(\"GeometryEngine.loadContent: No version specified in asset, trying to load as v2.\"),u=\"2.0\";const i=e=>{const t=e.includes(\"/\")?\"/\":\"\\\\\",n=e.split(t);return n.pop(),n.join(t)};!(d=i(s))&&window&&window.location&&window.location.href&&(d=i(window.location.href))}}(g=\"1.0\"===u?(new n.GLTFLoader).load(e,l,h,d,r):(new i.GLTFLoader).load(e,l,h,d,r)).catch(e=>{c(e)}),a(g)}));this._loadingQueue.push(a);const c=yield a;return this._loadingQueue.splice(this._loadingQueue.indexOf(a),1),this._performanceEvaluator.endSection(\"gltfProcessing.\"+s),c})}}exports.GeometryEngine=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":414}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":420}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":422}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":430}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":468}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":470}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":478}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":501}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":503}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":511}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":534}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":8,"column":13},"generated":{"line":1,"column":540}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":542}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":11,"column":21},"generated":{"line":1,"column":556}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":11,"column":21},"generated":{"line":1,"column":561}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":11,"column":54},"generated":{"line":1,"column":592}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":12,"column":21},"generated":{"line":1,"column":595}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":12,"column":21},"generated":{"line":1,"column":600}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":12,"column":47},"generated":{"line":1,"column":612}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":12,"column":47},"generated":{"line":1,"column":614}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":12,"column":58},"generated":{"line":1,"column":625}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":13,"column":21},"generated":{"line":1,"column":634}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":13,"column":21},"generated":{"line":1,"column":639}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":13,"column":59},"generated":{"line":1,"column":653}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":14,"column":21},"generated":{"line":1,"column":656}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":14,"column":21},"generated":{"line":1,"column":661}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":14,"column":39},"generated":{"line":1,"column":669}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":14,"column":39},"generated":{"line":1,"column":671}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":14,"column":46},"generated":{"line":1,"column":678}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":15,"column":21},"generated":{"line":1,"column":687}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":15,"column":21},"generated":{"line":1,"column":692}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":15,"column":45},"generated":{"line":1,"column":714}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":15,"column":45},"generated":{"line":1,"column":716}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":15,"column":66},"generated":{"line":1,"column":737}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":19,"column":12},"generated":{"line":1,"column":746}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":19,"column":12},"generated":{"line":1,"column":751}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":19,"column":34},"generated":{"line":1,"column":771}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":19,"column":34},"generated":{"line":1,"column":773}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":25,"column":11},"generated":{"line":1,"column":775}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":797}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":26,"column":15},"generated":{"line":1,"column":804}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":26,"column":20},"generated":{"line":1,"column":809}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":26,"column":34},"generated":{"line":1,"column":821}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":26,"column":39},"generated":{"line":1,"column":826}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":26,"column":51},"generated":{"line":1,"column":836}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":26,"column":55},"generated":{"line":1,"column":840}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":1,"column":846}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":1,"column":875}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":34,"column":15},"generated":{"line":1,"column":882}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":34,"column":20},"generated":{"line":1,"column":887}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":1,"column":907}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":37,"column":38},"generated":{"line":1,"column":934}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":38,"column":8},"generated":{"line":1,"column":937}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":38,"column":13},"generated":{"line":1,"column":942}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":38,"column":35},"generated":{"line":1,"column":962}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":51,"column":17},"generated":{"line":1,"column":964}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":51,"column":29},"generated":{"line":1,"column":976}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":51,"column":71},"generated":{"line":1,"column":978}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":1021}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":52,"column":13},"generated":{"line":1,"column":1025}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":52,"column":25},"generated":{"line":1,"column":1028}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":52,"column":37},"generated":{"line":1,"column":1032}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":52,"column":45},"generated":{"line":1,"column":1034}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":53,"column":12},"generated":{"line":1,"column":1039}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":53,"column":18},"generated":{"line":1,"column":1045}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":53,"column":22},"generated":{"line":1,"column":1049}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":53,"column":22},"generated":{"line":1,"column":1051}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":53,"column":58},"generated":{"line":1,"column":1087}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":1126}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":55,"column":14},"generated":{"line":1,"column":1131}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":55,"column":19},"generated":{"line":1,"column":1136}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":55,"column":42},"generated":{"line":1,"column":1157}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":55,"column":47},"generated":{"line":1,"column":1162}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":55,"column":61},"generated":{"line":1,"column":1176}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":56,"column":18},"generated":{"line":1,"column":1190}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":56,"column":22},"generated":{"line":1,"column":1194}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":56,"column":30},"generated":{"line":1,"column":1202}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":56,"column":41},"generated":{"line":1,"column":1205}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":56,"column":52},"generated":{"line":1,"column":1216}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":56,"column":61},"generated":{"line":1,"column":1218}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":1223}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":58,"column":14},"generated":{"line":1,"column":1229}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":58,"column":20},"generated":{"line":1,"column":1231}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":58,"column":28},"generated":{"line":1,"column":1233}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":14},"generated":{"line":1,"column":1238}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":31},"generated":{"line":1,"column":1240}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":35},"generated":{"line":1,"column":1244}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":54},"generated":{"line":1,"column":1252}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":61},"generated":{"line":1,"column":1253}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":70},"generated":{"line":1,"column":1255}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":80},"generated":{"line":1,"column":1259}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":80},"generated":{"line":1,"column":1261}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":80},"generated":{"line":1,"column":1271}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":80},"generated":{"line":1,"column":1278}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":60,"column":80},"generated":{"line":1,"column":1280}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":61,"column":12},"generated":{"line":1,"column":1292}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":61,"column":16},"generated":{"line":1,"column":1296}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":61,"column":29},"generated":{"line":1,"column":1298}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":61,"column":41},"generated":{"line":1,"column":1300}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":61,"column":54},"generated":{"line":1,"column":1302}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":129,"column":16},"generated":{"line":1,"column":1304}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":1,"column":1306}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":62,"column":26},"generated":{"line":1,"column":1308}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":1314}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":64,"column":35},"generated":{"line":1,"column":1317}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":64,"column":16},"generated":{"line":1,"column":1325}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":64,"column":24},"generated":{"line":1,"column":1327}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":64,"column":63},"generated":{"line":1,"column":1335}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":64,"column":44},"generated":{"line":1,"column":1344}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":64,"column":52},"generated":{"line":1,"column":1346}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":64,"column":71},"generated":{"line":1,"column":1353}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":65,"column":16},"generated":{"line":1,"column":1354}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":65,"column":21},"generated":{"line":1,"column":1359}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":65,"column":43},"generated":{"line":1,"column":1381}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":65,"column":56},"generated":{"line":1,"column":1394}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":65,"column":76},"generated":{"line":1,"column":1412}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":67,"column":16},"generated":{"line":1,"column":1415}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":67,"column":21},"generated":{"line":1,"column":1420}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":67,"column":43},"generated":{"line":1,"column":1442}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":67,"column":56},"generated":{"line":1,"column":1455}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":67,"column":70},"generated":{"line":1,"column":1467}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":68,"column":16},"generated":{"line":1,"column":1470}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":68,"column":22},"generated":{"line":1,"column":1476}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":68,"column":44},"generated":{"line":1,"column":1484}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":68,"column":49},"generated":{"line":1,"column":1489}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":68,"column":61},"generated":{"line":1,"column":1501}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":68,"column":65},"generated":{"line":1,"column":1505}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":68,"column":71},"generated":{"line":1,"column":1507}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":69,"column":20},"generated":{"line":1,"column":1508}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":69,"column":34},"generated":{"line":1,"column":1521}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":71,"column":16},"generated":{"line":1,"column":1537}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":71,"column":21},"generated":{"line":1,"column":1542}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":71,"column":43},"generated":{"line":1,"column":1564}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":71,"column":54},"generated":{"line":1,"column":1575}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":71,"column":68},"generated":{"line":1,"column":1587}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":16},"generated":{"line":1,"column":1590}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":22},"generated":{"line":1,"column":1596}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":30},"generated":{"line":1,"column":1599}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":34},"generated":{"line":1,"column":1603}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":48},"generated":{"line":1,"column":1616}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":55},"generated":{"line":1,"column":1623}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":59},"generated":{"line":1,"column":1627}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":70},"generated":{"line":1,"column":1638}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":84},"generated":{"line":1,"column":1640}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":90},"generated":{"line":1,"column":1645}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":73,"column":93},"generated":{"line":1,"column":1647}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":76,"column":16},"generated":{"line":1,"column":1651}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":74,"column":43},"generated":{"line":1,"column":1654}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":74,"column":33},"generated":{"line":1,"column":1663}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":76,"column":30},"generated":{"line":1,"column":1665}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":77,"column":20},"generated":{"line":1,"column":1666}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":77,"column":33},"generated":{"line":1,"column":1668}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":77,"column":47},"generated":{"line":1,"column":1670}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":79,"column":20},"generated":{"line":1,"column":1675}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":79,"column":26},"generated":{"line":1,"column":1681}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":79,"column":43},"generated":{"line":1,"column":1683}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":79,"column":47},"generated":{"line":1,"column":1687}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":79,"column":56},"generated":{"line":1,"column":1696}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":79,"column":68},"generated":{"line":1,"column":1698}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":79,"column":71},"generated":{"line":1,"column":1700}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":79,"column":76},"generated":{"line":1,"column":1705}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":87,"column":20},"generated":{"line":1,"column":1737}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":87,"column":44},"generated":{"line":1,"column":1740}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":80,"column":20},"generated":{"line":1,"column":1749}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":80,"column":33},"generated":{"line":1,"column":1751}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":81,"column":24},"generated":{"line":1,"column":1752}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":81,"column":31},"generated":{"line":1,"column":1758}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":82,"column":24},"generated":{"line":1,"column":1760}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":82,"column":33},"generated":{"line":1,"column":1768}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":82,"column":48},"generated":{"line":1,"column":1770}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":82,"column":58},"generated":{"line":1,"column":1780}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":82,"column":61},"generated":{"line":1,"column":1783}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":83,"column":24},"generated":{"line":1,"column":1786}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":83,"column":32},"generated":{"line":1,"column":1793}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":83,"column":47},"generated":{"line":1,"column":1795}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":83,"column":57},"generated":{"line":1,"column":1805}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":83,"column":60},"generated":{"line":1,"column":1808}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":84,"column":24},"generated":{"line":1,"column":1811}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":84,"column":39},"generated":{"line":1,"column":1825}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":84,"column":54},"generated":{"line":1,"column":1827}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":84,"column":64},"generated":{"line":1,"column":1837}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":84,"column":68},"generated":{"line":1,"column":1841}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":85,"column":24},"generated":{"line":1,"column":1844}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":85,"column":39},"generated":{"line":1,"column":1858}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":85,"column":54},"generated":{"line":1,"column":1860}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":85,"column":64},"generated":{"line":1,"column":1870}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":85,"column":68},"generated":{"line":1,"column":1874}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":87,"column":35},"generated":{"line":1,"column":1879}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":88,"column":24},"generated":{"line":1,"column":1885}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":88,"column":30},"generated":{"line":1,"column":1891}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":88,"column":34},"generated":{"line":1,"column":1895}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":88,"column":34},"generated":{"line":1,"column":1897}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":88,"column":70},"generated":{"line":1,"column":1933}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":91,"column":20},"generated":{"line":1,"column":1968}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":91,"column":26},"generated":{"line":1,"column":1974}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":91,"column":44},"generated":{"line":1,"column":1976}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":91,"column":48},"generated":{"line":1,"column":1980}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":91,"column":57},"generated":{"line":1,"column":1989}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":91,"column":69},"generated":{"line":1,"column":1991}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":91,"column":74},"generated":{"line":1,"column":1996}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":91,"column":106},"generated":{"line":1,"column":2027}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":91,"column":117},"generated":{"line":1,"column":2029}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":92,"column":26},"generated":{"line":1,"column":2044}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":92,"column":43},"generated":{"line":1,"column":2047}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":92,"column":47},"generated":{"line":1,"column":2051}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":92,"column":61},"generated":{"line":1,"column":2064}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":92,"column":68},"generated":{"line":1,"column":2071}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":1,"column":2074}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":93,"column":20},"generated":{"line":1,"column":2078}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":93,"column":34},"generated":{"line":1,"column":2080}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":93,"column":39},"generated":{"line":1,"column":2085}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":93,"column":45},"generated":{"line":1,"column":2091}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":95,"column":38},"generated":{"line":1,"column":2096}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":95,"column":50},"generated":{"line":1,"column":2098}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":95,"column":59},"generated":{"line":1,"column":2105}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":95,"column":71},"generated":{"line":1,"column":2107}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":95,"column":77},"generated":{"line":1,"column":2113}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":95,"column":86},"generated":{"line":1,"column":2121}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":24},"generated":{"line":1,"column":2122}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":30},"generated":{"line":1,"column":2128}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":46},"generated":{"line":1,"column":2131}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":58},"generated":{"line":1,"column":2133}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":64},"generated":{"line":1,"column":2139}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":74},"generated":{"line":1,"column":2147}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":78},"generated":{"line":1,"column":2151}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":87},"generated":{"line":1,"column":2160}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":95},"generated":{"line":1,"column":2166}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":107},"generated":{"line":1,"column":2168}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":113},"generated":{"line":1,"column":2174}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":123},"generated":{"line":1,"column":2182}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":135},"generated":{"line":1,"column":2184}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":141},"generated":{"line":1,"column":2190}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":96,"column":151},"generated":{"line":1,"column":2198}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":97,"column":24},"generated":{"line":1,"column":2203}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":97,"column":27},"generated":{"line":1,"column":2206}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":97,"column":38},"generated":{"line":1,"column":2208}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":97,"column":48},"generated":{"line":1,"column":2216}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":97,"column":57},"generated":{"line":1,"column":2223}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":28},"generated":{"line":1,"column":2225}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":34},"generated":{"line":1,"column":2231}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":38},"generated":{"line":1,"column":2235}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":38},"generated":{"line":1,"column":2237}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":74},"generated":{"line":1,"column":2273}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":128},"generated":{"line":1,"column":2325}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":139},"generated":{"line":1,"column":2327}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":149},"generated":{"line":1,"column":2335}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":190},"generated":{"line":1,"column":2374}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":100,"column":205},"generated":{"line":1,"column":2376}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":98,"column":28},"generated":{"line":1,"column":2382}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":98,"column":38},"generated":{"line":1,"column":2384}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":98,"column":49},"generated":{"line":1,"column":2386}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":98,"column":59},"generated":{"line":1,"column":2394}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":103,"column":24},"generated":{"line":1,"column":2404}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":103,"column":34},"generated":{"line":1,"column":2406}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":103,"column":45},"generated":{"line":1,"column":2408}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":103,"column":55},"generated":{"line":1,"column":2416}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":105,"column":23},"generated":{"line":1,"column":2425}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":108,"column":20},"generated":{"line":1,"column":2426}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":106,"column":20},"generated":{"line":1,"column":2430}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":106,"column":34},"generated":{"line":1,"column":2432}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":106,"column":39},"generated":{"line":1,"column":2437}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":106,"column":45},"generated":{"line":1,"column":2444}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":106,"column":49},"generated":{"line":1,"column":2448}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":106,"column":63},"generated":{"line":1,"column":2461}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":106,"column":70},"generated":{"line":1,"column":2468}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":106,"column":84},"generated":{"line":1,"column":2470}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":108,"column":38},"generated":{"line":1,"column":2479}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":108,"column":50},"generated":{"line":1,"column":2481}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":108,"column":59},"generated":{"line":1,"column":2488}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":108,"column":71},"generated":{"line":1,"column":2490}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":108,"column":77},"generated":{"line":1,"column":2496}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":109,"column":24},"generated":{"line":1,"column":2505}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":109,"column":57},"generated":{"line":1,"column":2508}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":109,"column":27},"generated":{"line":1,"column":2516}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":109,"column":39},"generated":{"line":1,"column":2518}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":109,"column":45},"generated":{"line":1,"column":2524}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":110,"column":28},"generated":{"line":1,"column":2532}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":110,"column":34},"generated":{"line":1,"column":2538}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":110,"column":38},"generated":{"line":1,"column":2542}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":110,"column":38},"generated":{"line":1,"column":2544}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":110,"column":74},"generated":{"line":1,"column":2580}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":112,"column":24},"generated":{"line":1,"column":2666}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":112,"column":29},"generated":{"line":1,"column":2671}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":112,"column":37},"generated":{"line":1,"column":2679}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":112,"column":42},"generated":{"line":1,"column":2684}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":113,"column":24},"generated":{"line":1,"column":2768}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":113,"column":34},"generated":{"line":1,"column":2770}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":116,"column":20},"generated":{"line":1,"column":2776}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":116,"column":26},"generated":{"line":1,"column":2782}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":116,"column":55},"generated":{"line":1,"column":2784}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":117,"column":24},"generated":{"line":1,"column":2788}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":117,"column":30},"generated":{"line":1,"column":2794}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":117,"column":41},"generated":{"line":1,"column":2796}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":117,"column":49},"generated":{"line":1,"column":2798}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":117,"column":58},"generated":{"line":1,"column":2807}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":117,"column":65},"generated":{"line":1,"column":2812}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":117,"column":71},"generated":{"line":1,"column":2816}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":118,"column":30},"generated":{"line":1,"column":2821}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":118,"column":40},"generated":{"line":1,"column":2823}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":118,"column":48},"generated":{"line":1,"column":2825}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":118,"column":54},"generated":{"line":1,"column":2831}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":120,"column":24},"generated":{"line":1,"column":2834}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":119,"column":24},"generated":{"line":1,"column":2841}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":119,"column":32},"generated":{"line":1,"column":2843}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":120,"column":31},"generated":{"line":1,"column":2849}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":120,"column":39},"generated":{"line":1,"column":2851}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":120,"column":44},"generated":{"line":1,"column":2856}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":123,"column":20},"generated":{"line":1,"column":2862}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":123,"column":34},"generated":{"line":1,"column":2864}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":123,"column":60},"generated":{"line":1,"column":2866}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":124,"column":40},"generated":{"line":1,"column":2871}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":124,"column":50},"generated":{"line":1,"column":2879}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":124,"column":57},"generated":{"line":1,"column":2886}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":124,"column":69},"generated":{"line":1,"column":2896}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":124,"column":76},"generated":{"line":1,"column":2903}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":124,"column":85},"generated":{"line":1,"column":2912}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":125,"column":24},"generated":{"line":1,"column":2919}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":125,"column":38},"generated":{"line":1,"column":2921}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":125,"column":64},"generated":{"line":1,"column":2923}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":125,"column":71},"generated":{"line":1,"column":2930}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":125,"column":80},"generated":{"line":1,"column":2939}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":16},"generated":{"line":1,"column":2948}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":130,"column":28},"generated":{"line":1,"column":2950}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":130,"column":16},"generated":{"line":1,"column":2958}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":26},"generated":{"line":1,"column":2961}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":30},"generated":{"line":1,"column":2965}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":30},"generated":{"line":1,"column":2967}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":46},"generated":{"line":1,"column":2979}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":51},"generated":{"line":1,"column":2984}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":64},"generated":{"line":1,"column":2986}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":76},"generated":{"line":1,"column":2988}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":88},"generated":{"line":1,"column":2990}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":131,"column":101},"generated":{"line":1,"column":2992}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":133,"column":26},"generated":{"line":1,"column":2996}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":133,"column":30},"generated":{"line":1,"column":3000}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":133,"column":30},"generated":{"line":1,"column":3002}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":133,"column":46},"generated":{"line":1,"column":3014}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":133,"column":51},"generated":{"line":1,"column":3019}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":133,"column":64},"generated":{"line":1,"column":3021}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":133,"column":76},"generated":{"line":1,"column":3023}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":133,"column":88},"generated":{"line":1,"column":3025}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":133,"column":101},"generated":{"line":1,"column":3027}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":135,"column":20},"generated":{"line":1,"column":3031}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":135,"column":26},"generated":{"line":1,"column":3037}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":135,"column":33},"generated":{"line":1,"column":3041}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":135,"column":40},"generated":{"line":1,"column":3043}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":136,"column":12},"generated":{"line":1,"column":3048}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":1,"column":3050}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":139,"column":8},"generated":{"line":1,"column":3056}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":139,"column":13},"generated":{"line":1,"column":3061}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":139,"column":27},"generated":{"line":1,"column":3075}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":139,"column":32},"generated":{"line":1,"column":3080}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":140,"column":8},"generated":{"line":1,"column":3083}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":140,"column":14},"generated":{"line":1,"column":3089}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":140,"column":27},"generated":{"line":1,"column":3097}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":145,"column":8},"generated":{"line":1,"column":3099}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":141,"column":8},"generated":{"line":1,"column":3106}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":141,"column":13},"generated":{"line":1,"column":3111}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":141,"column":27},"generated":{"line":1,"column":3125}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":141,"column":34},"generated":{"line":1,"column":3132}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":141,"column":39},"generated":{"line":1,"column":3137}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":141,"column":53},"generated":{"line":1,"column":3151}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":141,"column":61},"generated":{"line":1,"column":3159}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":141,"column":78},"generated":{"line":1,"column":3162}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":143,"column":8},"generated":{"line":1,"column":3165}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":143,"column":13},"generated":{"line":1,"column":3170}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":143,"column":35},"generated":{"line":1,"column":3192}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":143,"column":46},"generated":{"line":1,"column":3203}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":143,"column":66},"generated":{"line":1,"column":3221}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":145,"column":15},"generated":{"line":1,"column":3224}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":3229}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":3237}},{"source":"../src/GeometryEngine.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":3252}}],"sources":{"../src/GeometryEngine.ts":"import { ITreeNode } from '@shapediver/viewer.shared.node-tree'\r\nimport { HttpClient, Logger, PerformanceEvaluator, ShapeDiverViewerDataProcessingError } from '@shapediver/viewer.shared.services'\r\n\r\nimport { GLTFLoader as GLTF_v1Loader } from './gltfv1/GLTFLoader'\r\nimport { GLTFLoader as GLTF_v2Loader } from './gltfv2/GLTFLoader'\r\nimport { ShapeDiverResponseOutputContent } from '@shapediver/sdk.geometry-api-sdk-v2'\r\n\r\nexport class GeometryEngine {\r\n    // #region Properties (7)\r\n\r\n    private readonly BINARY_EXTENSION_HEADER_LENGTH = 20;\r\n    private readonly _httpClient: HttpClient = HttpClient.instance;\r\n    private readonly _loadingQueue: Promise<ITreeNode>[] = [];\r\n    private readonly _logger: Logger = Logger.instance;\r\n    private readonly _performanceEvaluator = PerformanceEvaluator.instance;\r\n\r\n    private static _instance: GeometryEngine;\r\n\r\n    private _loadingQueueLength = Infinity;\r\n\r\n    // #endregion Properties (7)\r\n\r\n    // #region Public Static Accessors (1)\r\n\r\n    public static get instance() {\r\n        return this._instance || (this._instance = new this());\r\n    }\r\n\r\n    // #endregion Public Static Accessors (1)\r\n\r\n    // #region Public Accessors (2)\r\n\r\n    public get parallelGlTFProcessing(): number {\r\n        return this._loadingQueueLength;\r\n    }\r\n\r\n    public set parallelGlTFProcessing(value: number) {\r\n        this._loadingQueueLength = value;\r\n    }\r\n\r\n    // #endregion Public Accessors (2)\r\n\r\n    // #region Public Methods (1)\r\n\r\n    /**\r\n     * Load the geometry content into a scene graph node.\r\n     * \r\n     * @param content the geometry content\r\n     * @returns the scene graph node \r\n     */\r\n    public async loadContent(content: ShapeDiverResponseOutputContent, taskEventId: string): Promise<ITreeNode> {\r\n        if (!content || (content && !content.href))\r\n            throw new ShapeDiverViewerDataProcessingError('GeometryEngine cannot load content.');\r\n\r\n        while(this._loadingQueueLength <= this._loadingQueue.length) \r\n            await new Promise(resolve => setTimeout(resolve, 10));\r\n\r\n        const url = content.href!;\r\n        // eslint-disable-next-line no-async-promise-executor\r\n        const loadingPromise = new Promise<ITreeNode>(async (resolve, reject) => {\r\n            let gltfContent, gltfBinary, gltfBaseUrl, gltfHeader;\r\n            let version = '2.0';\r\n    \r\n            if (content.format === 'glb' || content.format === 'gltf') {\r\n                this._performanceEvaluator.startSection('gltfProcessing.' + url);\r\n    \r\n                this._performanceEvaluator.startSection('loadGltf.' + url);\r\n                const axiosResponse = await this._httpClient.get(url!, {\r\n                    responseType: 'arraybuffer'\r\n                });\r\n                this._performanceEvaluator.endSection('loadGltf.' + url);\r\n    \r\n                const magic = new TextDecoder().decode(new Uint8Array(axiosResponse.data, 0, 4));\r\n                const isBinary = magic === 'glTF';\r\n    \r\n                if (isBinary) {\r\n                    gltfBinary = axiosResponse.data;\r\n                    // create header data\r\n                    const headerDataView = new DataView(gltfBinary, 0, this.BINARY_EXTENSION_HEADER_LENGTH);\r\n                    gltfHeader = {\r\n                        magic: magic,\r\n                        version: headerDataView.getUint32(4, true),\r\n                        length: headerDataView.getUint32(8, true),\r\n                        contentLength: headerDataView.getUint32(12, true),\r\n                        contentFormat: headerDataView.getUint32(16, true)\r\n                    }\r\n                    if (gltfHeader.magic != 'glTF') \r\n                        throw new ShapeDiverViewerDataProcessingError('Invalid data: glTF magic wrong.');\r\n                    \r\n                    // create content\r\n                    const contentDataView = new DataView(gltfBinary, this.BINARY_EXTENSION_HEADER_LENGTH, gltfHeader.contentLength);\r\n                    const contentDecoded = new TextDecoder().decode(contentDataView);\r\n                    gltfContent = JSON.parse(contentDecoded);\r\n    \r\n                    if(gltfContent && gltfContent.asset && gltfContent.asset.version) {\r\n                        const assetVersion = (gltfContent.asset.version + '').endsWith('.0') ? gltfContent.asset.version : gltfContent.asset.version + '.0';\r\n                        if(gltfHeader.version + '.0' === assetVersion) {\r\n                            version = gltfHeader.version + '.0';\r\n                        } else {\r\n                            throw new ShapeDiverViewerDataProcessingError('GeometryEngine.loadContent: glTF header version (' + gltfHeader.version + ') is not the same as asset version (' + assetVersion + ').');\r\n                        }\r\n                    } else {\r\n                        version = gltfHeader.version + '.0';\r\n                    }\r\n                } else {\r\n                    gltfContent = JSON.parse(new TextDecoder().decode(axiosResponse.data));\r\n    \r\n                    if(gltfContent && gltfContent.asset && gltfContent.asset.version) {\r\n                        if(gltfContent.asset.version !== '2.0')\r\n                            throw new ShapeDiverViewerDataProcessingError('GeometryEngine.loadContent: Only gltf v2 is supported in a non-binary format.');\r\n                    } else {\r\n                        this._logger.warn('GeometryEngine.loadContent: No version specified in asset, trying to load as v2.');\r\n                        version = '2.0';\r\n                    }\r\n    \r\n                    const removeLastDirectoryPartOf = (the_url: string): string => {\r\n                        const dir_char = the_url.includes(\"/\") ? \"/\" : \"\\\\\";\r\n                        const the_arr = the_url.split(dir_char);\r\n                        the_arr.pop();\r\n                        return the_arr.join(dir_char);\r\n                    }\r\n    \r\n                    gltfBaseUrl = removeLastDirectoryPartOf(url!);\r\n                    if (!gltfBaseUrl && window && window.location && window.location.href)\r\n                        gltfBaseUrl = removeLastDirectoryPartOf(window.location.href);\r\n                }\r\n            }\r\n            \r\n            let promise: Promise<ITreeNode>;\r\n            if (version === '1.0') {\r\n                promise = new GLTF_v1Loader().load(gltfContent, gltfBinary, gltfHeader, gltfBaseUrl, taskEventId)\r\n            } else {\r\n                promise = new GLTF_v2Loader().load(gltfContent, gltfBinary, gltfHeader, gltfBaseUrl, taskEventId);\r\n            }\r\n            promise.catch(e => { reject(e) })\r\n            resolve(promise);\r\n        })\r\n\r\n        this._loadingQueue.push(loadingPromise);\r\n        const node = await loadingPromise;\r\n        this._loadingQueue.splice(this._loadingQueue.indexOf(loadingPromise), 1);\r\n       \r\n        this._performanceEvaluator.endSection('gltfProcessing.' + url);\r\n\r\n        return node;\r\n    }\r\n\r\n    // #endregion Public Methods (1)\r\n}"},"lineCount":null}},"error":null,"hash":"a2d0c00ba1370ffa1b7d89640b4fb996","cacheData":{"env":{}}}