{"id":"WgnX","dependencies":[{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.session-engine.session-engine\\dist\\implementation\\dto\\FileParameter.js.map","includedInParent":true,"mtime":1706476151126},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.session-engine.session-engine\\src\\implementation\\dto\\FileParameter.ts","includedInParent":true,"mtime":1706476151774},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\package.json","includedInParent":true,"mtime":1706476652643},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.session-engine.session-engine\\package.json","includedInParent":true,"mtime":1706476151024},{"name":"@shapediver/viewer.shared.services","loc":{"line":44,"column":41,"index":2899},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.session-engine.session-engine\\dist\\implementation\\dto\\FileParameter.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.shared.services\\dist\\index.js"},{"name":"./Parameter","loc":{"line":45,"column":28,"index":2967},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.session-engine.session-engine\\dist\\implementation\\dto\\FileParameter.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.session-engine.session-engine\\dist\\implementation\\dto\\Parameter.js"},{"name":"@shapediver/viewer.utils.mime-type","loc":{"line":46,"column":43,"index":3027},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.session-engine.session-engine\\dist\\implementation\\dto\\FileParameter.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.utils.mime-type\\dist\\index.js"}],"generated":{"js":"\"use strict\";var e,t,i,r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,\"default\",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)\"default\"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return a(t,e),t},o=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(a,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function s(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},s=this&&this.__classPrivateFieldSet||function(e,t,i,r,a){if(\"m\"===r)throw new TypeError(\"Private method is not writable\");if(\"a\"===r&&!a)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof t?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===r?a.call(e,i):a?a.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if(\"a\"===i&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof t?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===i?r:\"a\"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.FileParameter=void 0;const u=require(\"@shapediver/viewer.shared.services\"),h=require(\"./Parameter\"),c=n(require(\"@shapediver/viewer.utils.mime-type\"));class d extends h.Parameter{constructor(r,a){super(r,a),e.set(this,u.Logger.instance),t.set(this,void 0),i.set(this,u.UuidGenerator.instance),s(this,t,a,\"f\")}upload(){var r;return o(this,void 0,void 0,function*(){if(void 0===this.value)return this.defval;if(\"string\"==typeof this.value&&(36===this.value.length&&l(this,i,\"f\").validate(this.value)||\"\"===this.value))return this.value;const a=new File([\"string\"==typeof this.value?new Blob([this.value],{type:\"text/plain\"}):this.value],\"upload\",{type:this.value.type});let n=[a.type];let o;c.mapMimeTypeToFileEndings(n).forEach(e=>n=n.concat(c.guessMimeTypeFromFilename(e)));let s=!1;for(let e=0;e<n.length;e++)if(null===(r=this.format)||void 0===r?void 0:r.includes(n[e])){s=!0,o=n[e];break}if(!s)throw new u.ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, type of data (${a.type}) is not a valid type. Has to be ${this.format}.`);return l(this,e,\"f\").debug(`Parameter(${this.id}).upload: Uploading FileParameter.`),yield l(this,t,\"f\").uploadFile(this.id,a,o)})}}exports.FileParameter=d,e=new WeakMap,t=new WeakMap,i=new WeakMap;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1686}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1692}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1694}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1702}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":1740}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":1742}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":1750}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":1765}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":1767}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":1769}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":1777}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":1816}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":8,"column":13},"generated":{"line":1,"column":1822}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":8,"column":35},"generated":{"line":1,"column":1832}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":8,"column":35},"generated":{"line":1,"column":1834}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":1844}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":1,"column":1856}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":19,"column":55},"generated":{"line":1,"column":1858}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":1861}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":20,"column":14},"generated":{"line":1,"column":1867}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":20,"column":24},"generated":{"line":1,"column":1869}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":1,"column":1872}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":1,"column":1874}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":1,"column":1878}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":11,"column":31},"generated":{"line":1,"column":1883}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":11,"column":31},"generated":{"line":1,"column":1885}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":11,"column":38},"generated":{"line":1,"column":1892}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":1,"column":1902}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":1,"column":1904}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":1,"column":1908}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":1,"column":1918}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":1921}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":1923}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":1927}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":13,"column":45},"generated":{"line":1,"column":1932}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":13,"column":45},"generated":{"line":1,"column":1934}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":13,"column":59},"generated":{"line":1,"column":1948}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":1958}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":1960}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":21,"column":12},"generated":{"line":1,"column":1965}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":21,"column":30},"generated":{"line":1,"column":1967}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":21,"column":43},"generated":{"line":1,"column":1969}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":28,"column":17},"generated":{"line":1,"column":1974}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":2029}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":29,"column":27},"generated":{"line":1,"column":2037}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":29,"column":12},"generated":{"line":1,"column":2041}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":29,"column":17},"generated":{"line":1,"column":2046}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":29,"column":38},"generated":{"line":1,"column":2052}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":29,"column":45},"generated":{"line":1,"column":2059}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":29,"column":50},"generated":{"line":1,"column":2064}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":2071}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":34},"generated":{"line":1,"column":2074}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":19},"generated":{"line":1,"column":2091}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":24},"generated":{"line":1,"column":2096}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":70},"generated":{"line":1,"column":2104}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":48},"generated":{"line":1,"column":2109}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":53},"generated":{"line":1,"column":2114}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":59},"generated":{"line":1,"column":2120}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":76},"generated":{"line":1,"column":2128}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":76},"generated":{"line":1,"column":2130}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":80},"generated":{"line":1,"column":2135}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":80},"generated":{"line":1,"column":2137}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":96},"generated":{"line":1,"column":2142}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":105},"generated":{"line":1,"column":2151}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":110},"generated":{"line":1,"column":2156}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":136},"generated":{"line":1,"column":2164}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":121},"generated":{"line":1,"column":2169}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":126},"generated":{"line":1,"column":2174}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":141},"generated":{"line":1,"column":2181}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":148},"generated":{"line":1,"column":2188}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":30,"column":153},"generated":{"line":1,"column":2193}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":1,"column":2199}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":32,"column":14},"generated":{"line":1,"column":2205}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":32,"column":21},"generated":{"line":1,"column":2207}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":32,"column":25},"generated":{"line":1,"column":2211}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":33,"column":12},"generated":{"line":1,"column":2216}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":34,"column":38},"generated":{"line":1,"column":2217}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":34,"column":23},"generated":{"line":1,"column":2234}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":34,"column":28},"generated":{"line":1,"column":2239}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":35,"column":20},"generated":{"line":1,"column":2245}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":35,"column":24},"generated":{"line":1,"column":2249}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":35,"column":29},"generated":{"line":1,"column":2254}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":35,"column":30},"generated":{"line":1,"column":2255}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":35,"column":35},"generated":{"line":1,"column":2260}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":35,"column":43},"generated":{"line":1,"column":2267}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":35,"column":45},"generated":{"line":1,"column":2268}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":35,"column":51},"generated":{"line":1,"column":2273}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":36,"column":20},"generated":{"line":1,"column":2288}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":36,"column":25},"generated":{"line":1,"column":2293}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":38,"column":12},"generated":{"line":1,"column":2300}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":1,"column":2309}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":39,"column":14},"generated":{"line":1,"column":2310}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":39,"column":34},"generated":{"line":1,"column":2315}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":39,"column":39},"generated":{"line":1,"column":2320}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":39,"column":46},"generated":{"line":1,"column":2326}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":2333}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":42,"column":12},"generated":{"line":1,"column":2337}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":42,"column":20},"generated":{"line":1,"column":2339}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":42,"column":21},"generated":{"line":1,"column":2340}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":42,"column":26},"generated":{"line":1,"column":2342}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":1,"column":2348}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":48,"column":12},"generated":{"line":1,"column":2352}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":44,"column":24},"generated":{"line":1,"column":2354}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":44,"column":38},"generated":{"line":1,"column":2356}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":44,"column":63},"generated":{"line":1,"column":2381}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":46,"column":16},"generated":{"line":1,"column":2384}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":46,"column":25},"generated":{"line":1,"column":2392}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":46,"column":39},"generated":{"line":1,"column":2395}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":46,"column":47},"generated":{"line":1,"column":2397}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":46,"column":53},"generated":{"line":1,"column":2399}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":46,"column":60},"generated":{"line":1,"column":2406}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":46,"column":74},"generated":{"line":1,"column":2408}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":46,"column":100},"generated":{"line":1,"column":2434}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":2439}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":50,"column":12},"generated":{"line":1,"column":2443}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":50,"column":26},"generated":{"line":1,"column":2446}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":2448}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":51,"column":13},"generated":{"line":1,"column":2452}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":51,"column":17},"generated":{"line":1,"column":2456}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":51,"column":21},"generated":{"line":1,"column":2458}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":51,"column":24},"generated":{"line":1,"column":2460}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":51,"column":28},"generated":{"line":1,"column":2462}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":51,"column":34},"generated":{"line":1,"column":2464}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":51,"column":42},"generated":{"line":1,"column":2471}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":12},"generated":{"line":1,"column":2475}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":2478}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":16},"generated":{"line":1,"column":2486}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":16},"generated":{"line":1,"column":2488}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":21},"generated":{"line":1,"column":2493}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":2507}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":2511}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":2518}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":2520}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":29},"generated":{"line":1,"column":2522}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":38},"generated":{"line":1,"column":2531}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":44},"generated":{"line":1,"column":2533}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":52,"column":49},"generated":{"line":1,"column":2537}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":53,"column":16},"generated":{"line":1,"column":2538}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":53,"column":30},"generated":{"line":1,"column":2541}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":1,"column":2543}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":54,"column":23},"generated":{"line":1,"column":2545}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":54,"column":29},"generated":{"line":1,"column":2547}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":55,"column":16},"generated":{"line":1,"column":2550}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":59,"column":8},"generated":{"line":1,"column":2556}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":59,"column":13},"generated":{"line":1,"column":2560}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":12},"generated":{"line":1,"column":2562}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":18},"generated":{"line":1,"column":2568}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":22},"generated":{"line":1,"column":2572}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":22},"generated":{"line":1,"column":2574}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":64},"generated":{"line":1,"column":2616}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":69},"generated":{"line":1,"column":2621}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":129},"generated":{"line":1,"column":2681}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":134},"generated":{"line":1,"column":2683}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":174},"generated":{"line":1,"column":2723}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":60,"column":179},"generated":{"line":1,"column":2728}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":2739}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":2746}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":2748}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":2753}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":2755}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":62,"column":21},"generated":{"line":1,"column":2760}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":62,"column":40},"generated":{"line":1,"column":2779}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":62,"column":45},"generated":{"line":1,"column":2784}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":21},"generated":{"line":1,"column":2830}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":21},"generated":{"line":1,"column":2832}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":25},"generated":{"line":1,"column":2837}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":25},"generated":{"line":1,"column":2839}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":41},"generated":{"line":1,"column":2844}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":52},"generated":{"line":1,"column":2855}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":57},"generated":{"line":1,"column":2860}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":61},"generated":{"line":1,"column":2863}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":64,"column":67},"generated":{"line":1,"column":2865}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":2871}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":2879}},{"source":"../../../src/implementation/dto/FileParameter.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":2893}}],"sources":{"../../../src/implementation/dto/FileParameter.ts":"import { ShapeDiverResponseParameter } from \"@shapediver/sdk.geometry-api-sdk-v2\";\r\nimport { Logger, ShapeDiverViewerSessionError, UuidGenerator } from \"@shapediver/viewer.shared.services\";\r\nimport { IFileParameter } from \"../../interfaces/dto/IFileParameter\";\r\nimport { Parameter } from \"./Parameter\";\r\nimport * as MimeTypeUtils from \"@shapediver/viewer.utils.mime-type\"\r\nimport { SessionEngine } from \"../SessionEngine\";\r\n\r\nexport class FileParameter extends Parameter<File | Blob | string> implements IFileParameter {\r\n    // #region Properties (5)\r\n\r\n    readonly #logger: Logger = Logger.instance;\r\n    readonly #sessionEngine: SessionEngine;\r\n    readonly #uuidGenerator: UuidGenerator = UuidGenerator.instance;\r\n\r\n    // #endregion Properties (5)\r\n\r\n    // #region Constructors (1)\r\n\r\n    constructor(paramDef: ShapeDiverResponseParameter, sessionEngine: SessionEngine) {\r\n        super(paramDef, sessionEngine);\r\n        this.#sessionEngine = sessionEngine;\r\n    }\r\n\r\n    // #endregion Constructors (1)\r\n\r\n    // #region Public Methods (1)\r\n\r\n    public async upload() {\r\n        if (this.value === undefined) return this.defval;\r\n        if (typeof this.value === 'string' && ((this.value.length === 36 && this.#uuidGenerator.validate(this.value)) || this.value === \"\")) return this.value;\r\n\r\n        const data = new File(\r\n            [\r\n                typeof this.value === 'string' ?\r\n                    new Blob([this.value], { type: 'text/plain' }) :\r\n                    this.value\r\n            ],\r\n            'upload',\r\n            { type: (<Blob | File>this.value).type }\r\n        );\r\n\r\n        let types = [data.type];\r\n        // get all endings that are possible for this type\r\n        const endings = MimeTypeUtils.mapMimeTypeToFileEndings(types);\r\n        // get all mimeTypes that are possible for these endings\r\n        endings.forEach((e: string) => types = types.concat(MimeTypeUtils.guessMimeTypeFromFilename(e)));\r\n\r\n        let type: string;\r\n        // check if one of the mime types is allowed\r\n        let allowedType = false;\r\n        for (let i = 0; i < types.length; i++) {\r\n            if (this.format?.includes(types[i])) {\r\n                allowedType = true;\r\n                type = types[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!allowedType) \r\n            throw new ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, type of data (${data.type}) is not a valid type. Has to be ${this.format}.`);\r\n\r\n        this.#logger.debug(`Parameter(${this.id}).upload: Uploading FileParameter.`);\r\n\r\n        return await this.#sessionEngine.uploadFile(this.id, data, type!)\r\n    }\r\n\r\n    // #endregion Public Methods (1)\r\n}"},"lineCount":null}},"error":null,"hash":"5b90e904b86f82d3e582c69b7c267aab","cacheData":{"env":{}}}