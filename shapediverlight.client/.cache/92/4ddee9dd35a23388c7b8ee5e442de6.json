{"id":"node_modules/@shapediver/viewer.rendering-engine.camera-engine/dist/implementation/camera/AbstractCamera.js","dependencies":[{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine.camera-engine\\dist\\implementation\\camera\\AbstractCamera.js.map","includedInParent":true,"mtime":1706542086356},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine.camera-engine\\src\\implementation\\camera\\AbstractCamera.ts","includedInParent":true,"mtime":1706542086920},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\package.json","includedInParent":true,"mtime":1706542184022},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine.camera-engine\\package.json","includedInParent":true,"mtime":1706542086292},{"name":"detect-it","loc":{"line":44,"column":38,"index":3256},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine.camera-engine\\dist\\implementation\\camera\\AbstractCamera.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\detect-it\\dist\\detect-it.esm.js"},{"name":"gl-matrix","loc":{"line":45,"column":28,"index":3300},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine.camera-engine\\dist\\implementation\\camera\\AbstractCamera.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\gl-matrix\\esm\\index.js"},{"name":"@shapediver/viewer.shared.services","loc":{"line":46,"column":41,"index":3356},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine.camera-engine\\dist\\implementation\\camera\\AbstractCamera.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.shared.services\\dist\\index.js"},{"name":"@shapediver/viewer.shared.math","loc":{"line":47,"column":37,"index":3433},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine.camera-engine\\dist\\implementation\\camera\\AbstractCamera.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.shared.math\\dist\\index.js"},{"name":"@shapediver/viewer.shared.node-tree","loc":{"line":48,"column":42,"index":3511},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine.camera-engine\\dist\\implementation\\camera\\AbstractCamera.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.shared.node-tree\\dist\\index.js"}],"generated":{"js":"\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar _AbstractCamera_active, _AbstractCamera_autoAdjust, _AbstractCamera_cameraMovementDuration, _AbstractCamera_defaultPosition, _AbstractCamera_defaultTarget, _AbstractCamera_enableCameraControls, _AbstractCamera_far, _AbstractCamera_name, _AbstractCamera_near, _AbstractCamera_node, _AbstractCamera_useNodeData, _AbstractCamera_order, _AbstractCamera_revertAtMouseUp, _AbstractCamera_revertAtMouseUpDuration, _AbstractCamera_zoomExtentsFactor;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AbstractCamera = void 0;\r\nconst detectIt = __importStar(require(\"detect-it\"));\r\nconst gl_matrix_1 = require(\"gl-matrix\");\r\nconst viewer_shared_services_1 = require(\"@shapediver/viewer.shared.services\");\r\nconst viewer_shared_math_1 = require(\"@shapediver/viewer.shared.math\");\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nclass AbstractCamera extends viewer_shared_node_tree_1.AbstractTreeNodeData {\r\n    // #endregion Properties (23)\r\n    // #region Constructors (1)\r\n    constructor(_id, _type, version) {\r\n        super(_id, version);\r\n        this._id = _id;\r\n        this._type = _type;\r\n        // #region Properties (23)\r\n        _AbstractCamera_active.set(this, false);\r\n        _AbstractCamera_autoAdjust.set(this, false);\r\n        _AbstractCamera_cameraMovementDuration.set(this, 800);\r\n        _AbstractCamera_defaultPosition.set(this, gl_matrix_1.vec3.create());\r\n        _AbstractCamera_defaultTarget.set(this, gl_matrix_1.vec3.create());\r\n        _AbstractCamera_enableCameraControls.set(this, true);\r\n        _AbstractCamera_far.set(this, 1000);\r\n        _AbstractCamera_name.set(this, void 0);\r\n        _AbstractCamera_near.set(this, 1);\r\n        _AbstractCamera_node.set(this, void 0);\r\n        _AbstractCamera_useNodeData.set(this, false);\r\n        _AbstractCamera_order.set(this, void 0);\r\n        _AbstractCamera_revertAtMouseUp.set(this, false);\r\n        _AbstractCamera_revertAtMouseUpDuration.set(this, 800);\r\n        _AbstractCamera_zoomExtentsFactor.set(this, 1);\r\n        this._eventEngine = viewer_shared_services_1.EventEngine.instance;\r\n        this._stateEngine = viewer_shared_services_1.StateEngine.instance;\r\n        this._boundingBox = new viewer_shared_math_1.Box();\r\n        this._position = gl_matrix_1.vec3.create();\r\n        this._target = gl_matrix_1.vec3.create();\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Accessors (39)\r\n    get active() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_active, \"f\");\r\n    }\r\n    set active(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_active, value, \"f\");\r\n    }\r\n    get autoAdjust() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_autoAdjust, \"f\");\r\n    }\r\n    set autoAdjust(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_autoAdjust, value, \"f\");\r\n    }\r\n    set boundingBox(value) {\r\n        this._boundingBox = value;\r\n    }\r\n    get cameraMovementDuration() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_cameraMovementDuration, \"f\");\r\n    }\r\n    set cameraMovementDuration(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_cameraMovementDuration, value, \"f\");\r\n    }\r\n    get controls() {\r\n        return this._controls;\r\n    }\r\n    get defaultPosition() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_defaultPosition, \"f\");\r\n    }\r\n    set defaultPosition(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_defaultPosition, value, \"f\");\r\n    }\r\n    get defaultTarget() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_defaultTarget, \"f\");\r\n    }\r\n    set defaultTarget(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_defaultTarget, value, \"f\");\r\n    }\r\n    get enableCameraControls() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_enableCameraControls, \"f\");\r\n    }\r\n    set enableCameraControls(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_enableCameraControls, value, \"f\");\r\n    }\r\n    get far() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_far, \"f\");\r\n    }\r\n    set far(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_far, value, \"f\");\r\n    }\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    get name() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_name, \"f\");\r\n    }\r\n    set name(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_name, value, \"f\");\r\n    }\r\n    get near() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_near, \"f\");\r\n    }\r\n    set near(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_near, value, \"f\");\r\n    }\r\n    get node() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_node, \"f\");\r\n    }\r\n    set node(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_node, value, \"f\");\r\n    }\r\n    get useNodeData() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_useNodeData, \"f\");\r\n    }\r\n    set useNodeData(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_useNodeData, value, \"f\");\r\n    }\r\n    get order() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_order, \"f\");\r\n    }\r\n    set order(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_order, value, \"f\");\r\n    }\r\n    get position() {\r\n        return this._position;\r\n    }\r\n    set position(value) {\r\n        this._position = value;\r\n        this._controls.position = value;\r\n    }\r\n    get revertAtMouseUp() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_revertAtMouseUp, \"f\");\r\n    }\r\n    set revertAtMouseUp(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_revertAtMouseUp, value, \"f\");\r\n    }\r\n    get revertAtMouseUpDuration() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_revertAtMouseUpDuration, \"f\");\r\n    }\r\n    set revertAtMouseUpDuration(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_revertAtMouseUpDuration, value, \"f\");\r\n    }\r\n    get target() {\r\n        return this._target;\r\n    }\r\n    set target(value) {\r\n        this._target = value;\r\n        this._controls.target = value;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    get viewportId() {\r\n        return this._viewportId;\r\n    }\r\n    get zoomExtentsFactor() {\r\n        return __classPrivateFieldGet(this, _AbstractCamera_zoomExtentsFactor, \"f\");\r\n    }\r\n    set zoomExtentsFactor(value) {\r\n        __classPrivateFieldSet(this, _AbstractCamera_zoomExtentsFactor, value, \"f\");\r\n    }\r\n    // #endregion Public Accessors (39)\r\n    // #region Public Methods (5)\r\n    animate(path, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (path.length === 0)\r\n                return Promise.resolve(false);\r\n            if (!options)\r\n                options = {};\r\n            options.duration = options.duration >= 0 ? options.duration : this.cameraMovementDuration;\r\n            const res = yield this._controls.animate(path, options);\r\n            if (res) {\r\n                this._position = this._controls.position;\r\n                this._target = this._controls.target;\r\n            }\r\n            return res;\r\n        });\r\n    }\r\n    reset(options) {\r\n        if ((this.defaultPosition[0] === 0 && this.defaultPosition[1] === 0 && this.defaultPosition[2] === 0) && (this.defaultTarget[0] === 0 && this.defaultTarget[1] === 0 && this.defaultTarget[2] === 0)) {\r\n            return this.zoomTo(undefined, options);\r\n        }\r\n        else {\r\n            return this.set(gl_matrix_1.vec3.clone(this.defaultPosition), gl_matrix_1.vec3.clone(this.defaultTarget), options);\r\n        }\r\n    }\r\n    set(position, target, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!options)\r\n                options = {};\r\n            options.duration = options.duration >= 0 ? options.duration : this.cameraMovementDuration;\r\n            const res = yield this._controls.animate([\r\n                { position: gl_matrix_1.vec3.clone(this.position), target: gl_matrix_1.vec3.clone(this.target) },\r\n                { position, target }\r\n            ], options);\r\n            if (res) {\r\n                this._position = this._controls.position;\r\n                this._target = this._controls.target;\r\n            }\r\n            return res;\r\n        });\r\n    }\r\n    update(time) {\r\n        if (this.useNodeData && this.node && this._viewportId) {\r\n            return true;\r\n        }\r\n        else {\r\n            const { position, target } = this._controls.update(time);\r\n            let changed = true;\r\n            if (gl_matrix_1.vec3.equals(position, this.position) && gl_matrix_1.vec3.equals(target, this.target))\r\n                changed = false;\r\n            this.position = gl_matrix_1.vec3.clone(position);\r\n            this.target = gl_matrix_1.vec3.clone(target);\r\n            return changed;\r\n        }\r\n    }\r\n    zoomTo(zoomTarget, options) {\r\n        const { position, target } = this.calculateZoomTo(zoomTarget);\r\n        return this.set(position, target, options);\r\n    }\r\n    // #endregion Public Abstract Methods (5)\r\n    // #region Protected Methods (1)\r\n    assignViewerInternal(viewportId, canvas) {\r\n        this._viewportId = viewportId;\r\n        this._eventEngine.addListener(viewer_shared_services_1.EVENTTYPE.SESSION.SESSION_CUSTOMIZED, (e) => __awaiter(this, void 0, void 0, function* () {\r\n            if (__classPrivateFieldGet(this, _AbstractCamera_autoAdjust, \"f\") === true) {\r\n                const innerListenerToken = this._eventEngine.addListener(viewer_shared_services_1.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED, (e) => __awaiter(this, void 0, void 0, function* () {\r\n                    this.zoomTo();\r\n                    this._eventEngine.removeListener(innerListenerToken);\r\n                }));\r\n            }\r\n        }));\r\n        const revert = () => {\r\n            if (__classPrivateFieldGet(this, _AbstractCamera_revertAtMouseUp, \"f\") === true)\r\n                this.reset({ duration: __classPrivateFieldGet(this, _AbstractCamera_revertAtMouseUpDuration, \"f\") });\r\n        };\r\n        canvas.addEventListener(\"mouseup\", () => revert(), detectIt.supportsPassiveEvents ? { capture: false, passive: true } : false);\r\n        canvas.addEventListener(\"mouseout\", () => revert(), detectIt.supportsPassiveEvents ? { capture: false, passive: true } : false);\r\n        canvas.addEventListener(\"touchend\", () => revert(), detectIt.supportsPassiveEvents ? { capture: false, passive: true } : false);\r\n        let zoomResizeTimeout;\r\n        let mouseWheelEvent = /Firefox/i.test(navigator.userAgent) ? \"DOMMouseScroll\" : \"mousewheel\"; //FF doesn't recognize mousewheel as of FF3.x\r\n        canvas.addEventListener(mouseWheelEvent, () => {\r\n            clearTimeout(zoomResizeTimeout);\r\n            zoomResizeTimeout = setTimeout(revert, 300);\r\n        }, detectIt.supportsPassiveEvents ? { capture: false, passive: true } : false);\r\n    }\r\n}\r\nexports.AbstractCamera = AbstractCamera;\r\n_AbstractCamera_active = new WeakMap(), _AbstractCamera_autoAdjust = new WeakMap(), _AbstractCamera_cameraMovementDuration = new WeakMap(), _AbstractCamera_defaultPosition = new WeakMap(), _AbstractCamera_defaultTarget = new WeakMap(), _AbstractCamera_enableCameraControls = new WeakMap(), _AbstractCamera_far = new WeakMap(), _AbstractCamera_name = new WeakMap(), _AbstractCamera_near = new WeakMap(), _AbstractCamera_node = new WeakMap(), _AbstractCamera_useNodeData = new WeakMap(), _AbstractCamera_order = new WeakMap(), _AbstractCamera_revertAtMouseUp = new WeakMap(), _AbstractCamera_revertAtMouseUpDuration = new WeakMap(), _AbstractCamera_zoomExtentsFactor = new WeakMap();\r\n"},"sourceMaps":{"js":{"version":3,"file":"AbstractCamera.js","sourceRoot":"","sources":["../../../src/implementation/camera/AbstractCamera.ts"],"names":[],"mappings":"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","sourcesContent":["import * as detectIt from 'detect-it'\r\nimport { vec2, vec3 } from 'gl-matrix'\r\nimport {\r\n    DomEventEngine,\r\n    EventEngine,\r\n    EVENTTYPE,\r\n    IEvent,\r\n    SettingsEngine,\r\n    StateEngine,\r\n} from '@shapediver/viewer.shared.services'\r\nimport { Box, IBox } from '@shapediver/viewer.shared.math'\r\nimport { AbstractTreeNodeData, ITreeNode } from '@shapediver/viewer.shared.node-tree'\r\n\r\nimport { ICameraControls } from '../../interfaces/controls/ICameraControls'\r\nimport { ICamera, ICameraOptions } from '../../interfaces/camera/ICamera'\r\nimport { CAMERA_TYPE } from '../../interfaces/ICameraEngine'\r\nimport { IRenderingEngine } from '@shapediver/viewer.rendering-engine.rendering-engine'\r\n\r\nexport abstract class AbstractCamera extends AbstractTreeNodeData implements ICamera {\r\n    // #region Properties (23)\r\n\r\n    #active: boolean = false;\r\n    #autoAdjust: boolean = false;\r\n    #cameraMovementDuration: number = 800;\r\n    #defaultPosition: vec3 = vec3.create();\r\n    #defaultTarget: vec3 = vec3.create();\r\n    #enableCameraControls: boolean = true;\r\n    #far: number = 1000;\r\n    #name?: string;\r\n    #near: number = 1;\r\n    #node?: ITreeNode;\r\n    #useNodeData: boolean = false;\r\n    #order?: number;\r\n    #revertAtMouseUp: boolean = false;\r\n    #revertAtMouseUpDuration: number = 800;\r\n    #zoomExtentsFactor: number = 1;\r\n\r\n    protected readonly _eventEngine: EventEngine = EventEngine.instance;\r\n    protected readonly _stateEngine: StateEngine = StateEngine.instance;\r\n\r\n    protected _boundingBox: IBox = new Box();\r\n    protected _position: vec3 = vec3.create();\r\n    protected _target: vec3 = vec3.create();\r\n    protected _viewportId?: string;\r\n\r\n    protected abstract _controls: ICameraControls;\r\n\r\n    // #endregion Properties (23)\r\n\r\n    // #region Constructors (1)\r\n\r\n    constructor(private readonly _id: string, private readonly _type: CAMERA_TYPE, version?: string) {\r\n        super(_id, version);\r\n    }\r\n\r\n    // #endregion Constructors (1)\r\n\r\n    // #region Public Accessors (39)\r\n\r\n    public get active(): boolean {\r\n        return this.#active;\r\n    }\r\n\r\n    public set active(value: boolean) {\r\n        this.#active = value;\r\n    }\r\n\r\n    public get autoAdjust(): boolean {\r\n        return this.#autoAdjust;\r\n    }\r\n\r\n    public set autoAdjust(value: boolean) {\r\n        this.#autoAdjust = value;\r\n    }\r\n\r\n    public set boundingBox(value: IBox) {\r\n        this._boundingBox = value;\r\n    }\r\n\r\n    public get cameraMovementDuration(): number {\r\n        return this.#cameraMovementDuration;\r\n    }\r\n\r\n    public set cameraMovementDuration(value: number) {\r\n        this.#cameraMovementDuration = value;\r\n    }\r\n\r\n    public get controls(): ICameraControls {\r\n        return this._controls;\r\n    }\r\n\r\n    public get defaultPosition(): vec3 {\r\n        return this.#defaultPosition;\r\n    }\r\n\r\n    public set defaultPosition(value: vec3) {\r\n        this.#defaultPosition = value;\r\n    }\r\n\r\n    public get defaultTarget(): vec3 {\r\n        return this.#defaultTarget;\r\n    }\r\n\r\n    public set defaultTarget(value: vec3) {\r\n        this.#defaultTarget = value;\r\n    }\r\n\r\n    public get enableCameraControls(): boolean {\r\n        return this.#enableCameraControls;\r\n    }\r\n\r\n    public set enableCameraControls(value: boolean) {\r\n        this.#enableCameraControls = value;\r\n    }\r\n\r\n    public get far(): number {\r\n        return this.#far;\r\n    }\r\n\r\n    public set far(value: number) {\r\n        this.#far = value;\r\n    }\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public get name(): string | undefined {\r\n        return this.#name;\r\n    }\r\n\r\n    public set name(value: string | undefined) {\r\n        this.#name = value;\r\n    }\r\n\r\n    public get near(): number {\r\n        return this.#near;\r\n    }\r\n\r\n    public set near(value: number) {\r\n        this.#near = value;\r\n    }\r\n\r\n    public get node(): ITreeNode | undefined {\r\n        return this.#node;\r\n    }\r\n\r\n    public set node(value: ITreeNode | undefined) {\r\n        this.#node = value;\r\n    }\r\n\r\n    public get useNodeData(): boolean {\r\n        return this.#useNodeData;\r\n    }\r\n\r\n    public set useNodeData(value: boolean) {\r\n        this.#useNodeData = value;\r\n    }\r\n\r\n    public get order(): number | undefined {\r\n        return this.#order;\r\n    }\r\n\r\n    public set order(value: number | undefined) {\r\n        this.#order = value;\r\n    }\r\n\r\n    public get position(): vec3 {\r\n        return this._position;\r\n    }\r\n\r\n    public set position(value: vec3) {\r\n        this._position = value;\r\n        this._controls.position = value;\r\n    }\r\n\r\n    public get revertAtMouseUp(): boolean {\r\n        return this.#revertAtMouseUp;\r\n    }\r\n\r\n    public set revertAtMouseUp(value: boolean) {\r\n        this.#revertAtMouseUp = value;\r\n    }\r\n\r\n    public get revertAtMouseUpDuration(): number {\r\n        return this.#revertAtMouseUpDuration;\r\n    }\r\n\r\n    public set revertAtMouseUpDuration(value: number) {\r\n        this.#revertAtMouseUpDuration = value;\r\n    }\r\n\r\n    public get target(): vec3 {\r\n        return this._target;\r\n    }\r\n\r\n    public set target(value: vec3) {\r\n        this._target = value;\r\n        this._controls.target = value;\r\n    }\r\n\r\n    public get type(): CAMERA_TYPE {\r\n        return this._type;\r\n    }\r\n\r\n    public get viewportId(): string | undefined {\r\n        return this._viewportId;\r\n    }\r\n\r\n    public get zoomExtentsFactor(): number {\r\n        return this.#zoomExtentsFactor;\r\n    }\r\n\r\n    public set zoomExtentsFactor(value: number) {\r\n        this.#zoomExtentsFactor = value;\r\n    }\r\n\r\n    // #endregion Public Accessors (39)\r\n\r\n    // #region Public Methods (5)\r\n\r\n    public async animate(path: { position: vec3; target: vec3; }[], options?: ICameraOptions): Promise<boolean> {\r\n        if (path.length === 0) return Promise.resolve(false);\r\n\r\n        if (!options) options = {};\r\n        options.duration = options.duration! >= 0 ? options.duration : this.cameraMovementDuration;\r\n\r\n        const res = await this._controls.animate(path, options);\r\n        if (res) {\r\n            this._position = this._controls.position;\r\n            this._target = this._controls.target;\r\n        }\r\n        return res;\r\n    }\r\n\r\n    public reset(options?: ICameraOptions): Promise<boolean> {\r\n        if ((this.defaultPosition[0] === 0 && this.defaultPosition[1] === 0 && this.defaultPosition[2] === 0) && (this.defaultTarget[0] === 0 && this.defaultTarget[1] === 0 && this.defaultTarget[2] === 0)) {\r\n            return this.zoomTo(undefined, options);\r\n        } else {\r\n            return this.set(vec3.clone(this.defaultPosition), vec3.clone(this.defaultTarget), options);\r\n        }\r\n    }\r\n\r\n    public async set(position: vec3, target: vec3, options?: ICameraOptions): Promise<boolean> {\r\n        if (!options) options = {};\r\n        options.duration = options.duration! >= 0 ? options.duration : this.cameraMovementDuration;\r\n\r\n        const res = await this._controls.animate([\r\n            { position: vec3.clone(this.position), target: vec3.clone(this.target) },\r\n            { position, target }], options);\r\n        if (res) {\r\n            this._position = this._controls.position;\r\n            this._target = this._controls.target;\r\n        }\r\n        return res;\r\n    }\r\n\r\n    public update(time: number): boolean {\r\n        if(this.useNodeData && this.node && this._viewportId) {\r\n            return true;\r\n        } else {\r\n            const { position, target } = this._controls.update(time);\r\n            let changed = true;\r\n            if (vec3.equals(position, this.position) && vec3.equals(target, this.target)) \r\n                changed = false;\r\n            \r\n            this.position = vec3.clone(position);\r\n            this.target = vec3.clone(target);\r\n            return changed;\r\n        }\r\n    }\r\n\r\n    public zoomTo(zoomTarget?: Box, options?: ICameraOptions): Promise<boolean> {\r\n        const { position, target } = this.calculateZoomTo(zoomTarget)\r\n        return this.set(position, target, options);\r\n    }\r\n\r\n    // #endregion Public Methods (5)\r\n\r\n    // #region Public Abstract Methods (5)\r\n\r\n    abstract applySettings(settingsEngine?: SettingsEngine): void;\r\n    abstract assignViewer(renderingEngine: IRenderingEngine): void;\r\n    abstract calculateZoomTo(zoomTarget?: Box, startingPosition?: vec3, startingTarget?: vec3): { position: vec3; target: vec3; };\r\n    abstract project(p: vec3): vec2;\r\n    abstract unproject(p: vec3): vec3;\r\n\r\n    // #endregion Public Abstract Methods (5)\r\n\r\n    // #region Protected Methods (1)\r\n\r\n    protected assignViewerInternal(viewportId: string, canvas: HTMLCanvasElement) {\r\n        this._viewportId = viewportId;\r\n        this._eventEngine.addListener(EVENTTYPE.SESSION.SESSION_CUSTOMIZED, async (e: IEvent) => {\r\n            if (this.#autoAdjust === true) {\r\n                const innerListenerToken = this._eventEngine.addListener(EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED, async (e: IEvent) => {\r\n                    this.zoomTo();\r\n                    this._eventEngine.removeListener(innerListenerToken)\r\n                })\r\n            }\r\n        });\r\n        const revert = () => {\r\n            if (this.#revertAtMouseUp === true)\r\n                this.reset({ duration: this.#revertAtMouseUpDuration });\r\n        };\r\n        canvas.addEventListener(\"mouseup\", () => revert(), detectIt.supportsPassiveEvents ? { capture: false, passive: true } : false);\r\n        canvas.addEventListener(\"mouseout\", () => revert(), detectIt.supportsPassiveEvents ? { capture: false, passive: true } : false);\r\n        canvas.addEventListener(\"touchend\", () => revert(), detectIt.supportsPassiveEvents ? { capture: false, passive: true } : false);\r\n\r\n        let zoomResizeTimeout: NodeJS.Timeout;\r\n        let mouseWheelEvent = /Firefox/i.test(navigator.userAgent) ? \"DOMMouseScroll\" : \"mousewheel\"; //FF doesn't recognize mousewheel as of FF3.x\r\n        canvas.addEventListener(mouseWheelEvent,\r\n            () => {\r\n                clearTimeout(zoomResizeTimeout);\r\n                zoomResizeTimeout = setTimeout(revert, 300);\r\n            }, detectIt.supportsPassiveEvents ? { capture: false, passive: true } : false);\r\n    }\r\n\r\n    // #endregion Protected Methods (1)\r\n}"]}},"error":null,"hash":"a7938660be68bae42c3792cef7a3ad4c","cacheData":{"env":{}}}