{"id":"node_modules/@shapediver/viewer.shared.types/dist/implementation/data/HTMLElementAnchorData.js","dependencies":[{"name":"D:\\projects\\myProjects\\shapeApp\\node_modules\\@shapediver\\viewer.shared.types\\dist\\implementation\\data\\HTMLElementAnchorData.js.map","includedInParent":true,"mtime":1706527151096},{"name":"D:\\projects\\myProjects\\shapeApp\\node_modules\\@shapediver\\viewer.shared.types\\src\\implementation\\data\\HTMLElementAnchorData.ts","includedInParent":true,"mtime":1706527152676},{"name":"D:\\projects\\myProjects\\shapeApp\\package.json","includedInParent":true,"mtime":1706533774939},{"name":"D:\\projects\\myProjects\\shapeApp\\node_modules\\@shapediver\\viewer.shared.types\\package.json","includedInParent":true,"mtime":1706527150980},{"name":"@shapediver/viewer.shared.node-tree","loc":{"line":16,"column":42,"index":1687},"parent":"D:\\projects\\myProjects\\shapeApp\\node_modules\\@shapediver\\viewer.shared.types\\dist\\implementation\\data\\HTMLElementAnchorData.js","resolved":"D:\\projects\\myProjects\\shapeApp\\node_modules\\@shapediver\\viewer.shared.node-tree\\dist\\index.js"}],"generated":{"js":"\"use strict\";\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _HTMLElementAnchorData_viewerHtmlElement, _HTMLElementAnchorData_data, _HTMLElementAnchorData_format, _HTMLElementAnchorData_hideable, _HTMLElementAnchorData_intersectionTarget, _HTMLElementAnchorData_location, _HTMLElementAnchorData_viewports, _HTMLElementAnchorCustomData_create, _HTMLElementAnchorCustomData_update;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HTMLElementAnchorCustomData = exports.HTMLElementAnchorImageData = exports.HTMLElementAnchorTextData = exports.HTMLElementAnchorData = void 0;\r\nconst viewer_shared_node_tree_1 = require(\"@shapediver/viewer.shared.node-tree\");\r\nclass HTMLElementAnchorData extends viewer_shared_node_tree_1.AbstractTreeNodeData {\r\n    // #endregion Properties (9)\r\n    // #region Constructors (1)\r\n    /**\r\n     * Creates a custom data node.\r\n     *\r\n     * @param _data the data as key- value pairs\r\n     * @param id the id\r\n     */\r\n    constructor(properties) {\r\n        super(properties.id, properties.version);\r\n        _HTMLElementAnchorData_viewerHtmlElement.set(this, {});\r\n        _HTMLElementAnchorData_data.set(this, void 0);\r\n        _HTMLElementAnchorData_format.set(this, void 0);\r\n        _HTMLElementAnchorData_hideable.set(this, true);\r\n        _HTMLElementAnchorData_intersectionTarget.set(this, void 0);\r\n        _HTMLElementAnchorData_location.set(this, void 0);\r\n        _HTMLElementAnchorData_viewports.set(this, []);\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_location, properties.location, \"f\");\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_data, properties.data, \"f\");\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_format, properties.format, \"f\");\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_hideable, properties.hideable === undefined ? true : properties.hideable, \"f\");\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_viewports, properties.viewports || [], \"f\");\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_intersectionTarget, properties.intersectionTarget, \"f\");\r\n        this.internalHtmlElement = document.createElement('div');\r\n        this.internalHtmlElement.style.position = 'absolute';\r\n        this.internalHtmlElement.style.whiteSpace = 'nowrap';\r\n        this.internalHtmlElement.style.textOverflow = 'clip';\r\n        this.internalHtmlElement.style.fontFamily = '\"Helvetica Neue\", Helvetica, Arial, sans-serif';\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Accessors (12)\r\n    get data() {\r\n        return __classPrivateFieldGet(this, _HTMLElementAnchorData_data, \"f\");\r\n    }\r\n    set data(value) {\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_data, value, \"f\");\r\n    }\r\n    get format() {\r\n        return __classPrivateFieldGet(this, _HTMLElementAnchorData_format, \"f\");\r\n    }\r\n    set format(value) {\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_format, value, \"f\");\r\n    }\r\n    get hideable() {\r\n        return __classPrivateFieldGet(this, _HTMLElementAnchorData_hideable, \"f\");\r\n    }\r\n    set hideable(value) {\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_hideable, value, \"f\");\r\n    }\r\n    get intersectionTarget() {\r\n        return __classPrivateFieldGet(this, _HTMLElementAnchorData_intersectionTarget, \"f\");\r\n    }\r\n    set intersectionTarget(value) {\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_intersectionTarget, value, \"f\");\r\n    }\r\n    get location() {\r\n        return __classPrivateFieldGet(this, _HTMLElementAnchorData_location, \"f\");\r\n    }\r\n    set location(value) {\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_location, value, \"f\");\r\n    }\r\n    get viewports() {\r\n        return __classPrivateFieldGet(this, _HTMLElementAnchorData_viewports, \"f\");\r\n    }\r\n    set viewports(value) {\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorData_viewports, value, \"f\");\r\n    }\r\n    // #endregion Public Accessors (12)\r\n    // #region Public Methods (3)\r\n    createViewerHtmlElement(viewer) {\r\n        if (__classPrivateFieldGet(this, _HTMLElementAnchorData_viewerHtmlElement, \"f\")[viewer])\r\n            return __classPrivateFieldGet(this, _HTMLElementAnchorData_viewerHtmlElement, \"f\")[viewer];\r\n        if (this.viewports.includes(viewer) || this.viewports.length === 0) {\r\n            __classPrivateFieldGet(this, _HTMLElementAnchorData_viewerHtmlElement, \"f\")[viewer] = this.internalHtmlElement.cloneNode(true);\r\n            this.create({ anchor: this, parent: __classPrivateFieldGet(this, _HTMLElementAnchorData_viewerHtmlElement, \"f\")[viewer] });\r\n            return __classPrivateFieldGet(this, _HTMLElementAnchorData_viewerHtmlElement, \"f\")[viewer];\r\n        }\r\n        return null;\r\n    }\r\n    getViewerHtmlElement(viewer) {\r\n        if (__classPrivateFieldGet(this, _HTMLElementAnchorData_viewerHtmlElement, \"f\")[viewer])\r\n            return __classPrivateFieldGet(this, _HTMLElementAnchorData_viewerHtmlElement, \"f\")[viewer];\r\n        return null;\r\n    }\r\n    update(properties) {\r\n        properties.htmlElement.style.display = '';\r\n        if ((this.hideable && properties.hidden) || properties.visible === false)\r\n            properties.htmlElement.style.display = 'none';\r\n        let x, y;\r\n        if (this.data.position && this.data.position.horizontal === 'right') {\r\n            x = properties.container[0] - properties.htmlElement.offsetWidth;\r\n        }\r\n        else if (this.data.position && this.data.position.horizontal === 'left') {\r\n            x = properties.container[0];\r\n        }\r\n        else {\r\n            x = properties.container[0] - properties.htmlElement.offsetWidth / 2;\r\n        }\r\n        if (this.data.position && this.data.position.vertical === 'bottom') {\r\n            y = properties.container[1] - properties.htmlElement.offsetHeight;\r\n        }\r\n        else if (this.data.position && this.data.position.vertical === 'top') {\r\n            y = properties.container[1];\r\n        }\r\n        else {\r\n            y = properties.container[1] - properties.htmlElement.offsetHeight / 2;\r\n        }\r\n        x = x / properties.scale[0];\r\n        y = y / properties.scale[1];\r\n        properties.htmlElement.style.left = x + 'px';\r\n        properties.htmlElement.style.top = y + 'px';\r\n    }\r\n}\r\nexports.HTMLElementAnchorData = HTMLElementAnchorData;\r\n_HTMLElementAnchorData_viewerHtmlElement = new WeakMap(), _HTMLElementAnchorData_data = new WeakMap(), _HTMLElementAnchorData_format = new WeakMap(), _HTMLElementAnchorData_hideable = new WeakMap(), _HTMLElementAnchorData_intersectionTarget = new WeakMap(), _HTMLElementAnchorData_location = new WeakMap(), _HTMLElementAnchorData_viewports = new WeakMap();\r\nclass HTMLElementAnchorTextData extends HTMLElementAnchorData {\r\n    // #region Constructors (1)\r\n    constructor(properties) {\r\n        super({\r\n            location: properties.location,\r\n            data: properties.data,\r\n            format: 'text',\r\n            hideable: properties.hideable,\r\n            viewports: properties.viewports,\r\n            intersectionTarget: properties.intersectionTarget,\r\n            id: properties.id,\r\n            version: properties.version,\r\n        });\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Methods (1)\r\n    clone() {\r\n        return new HTMLElementAnchorTextData({\r\n            location: this.location,\r\n            data: this.data,\r\n            hideable: this.hideable,\r\n            viewports: this.viewports,\r\n            intersectionTarget: this.intersectionTarget,\r\n            id: this.id,\r\n            version: this.version\r\n        });\r\n    }\r\n    // #endregion Public Methods (1)\r\n    // #region Private Methods (1)\r\n    create(properties) {\r\n        var _a;\r\n        const span = document.createElement('span');\r\n        span.style.display = 'none';\r\n        span.style.userSelect = 'none';\r\n        span.style.cursor = 'default';\r\n        span.style.pointerEvents = 'none';\r\n        span.style.color = (_a = properties.anchor.data.color) === null || _a === void 0 ? void 0 : _a.toString();\r\n        span.innerHTML = properties.anchor.data.text;\r\n        span.style.display = 'block';\r\n        span.style.textOverflow = 'clip';\r\n        span.style.overflow = 'hidden';\r\n        properties.parent.appendChild(span);\r\n        if (properties.anchor.data.textAlign && (properties.anchor.data.textAlign === 'right' || properties.anchor.data.textAlign === 'center')) {\r\n            span.style.textAlign = properties.anchor.data.textAlign;\r\n        }\r\n        else {\r\n            span.style.textAlign = 'left';\r\n        }\r\n    }\r\n}\r\nexports.HTMLElementAnchorTextData = HTMLElementAnchorTextData;\r\nclass HTMLElementAnchorImageData extends HTMLElementAnchorData {\r\n    // #region Constructors (1)\r\n    constructor(properties) {\r\n        super({\r\n            location: properties.location,\r\n            data: properties.data,\r\n            format: 'image',\r\n            hideable: properties.hideable,\r\n            viewports: properties.viewports,\r\n            intersectionTarget: properties.intersectionTarget,\r\n            id: properties.id,\r\n            version: properties.version\r\n        });\r\n    }\r\n    // #endregion Constructors (1)\r\n    // #region Public Methods (1)\r\n    clone() {\r\n        return new HTMLElementAnchorImageData({\r\n            location: this.location,\r\n            data: this.data,\r\n            hideable: this.hideable,\r\n            viewports: this.viewports,\r\n            intersectionTarget: this.intersectionTarget,\r\n            id: this.id,\r\n            version: this.version\r\n        });\r\n    }\r\n    // #endregion Public Methods (1)\r\n    // #region Private Methods (1)\r\n    create(properties) {\r\n        const img = document.createElement('img');\r\n        img.style.userSelect = 'none';\r\n        img.style.cursor = 'default';\r\n        img.style.pointerEvents = 'none';\r\n        properties.parent.appendChild(img);\r\n        img.src = properties.anchor.data.src;\r\n        if (properties.anchor.data.height)\r\n            img.height = properties.anchor.data.height;\r\n        if (properties.anchor.data.width)\r\n            img.width = properties.anchor.data.width;\r\n        if (properties.anchor.data.alt)\r\n            img.alt = properties.anchor.data.alt;\r\n    }\r\n}\r\nexports.HTMLElementAnchorImageData = HTMLElementAnchorImageData;\r\nclass HTMLElementAnchorCustomData extends HTMLElementAnchorData {\r\n    // #endregion Properties (1)\r\n    // #region Constructors (1)\r\n    constructor(properties) {\r\n        super({\r\n            location: properties.location,\r\n            data: properties.data,\r\n            format: 'custom',\r\n            hideable: properties.hideable,\r\n            viewports: properties.viewports,\r\n            intersectionTarget: properties.intersectionTarget,\r\n            id: properties.id,\r\n            version: properties.version\r\n        });\r\n        // #region Properties (1)\r\n        _HTMLElementAnchorCustomData_create.set(this, void 0);\r\n        _HTMLElementAnchorCustomData_update.set(this, void 0);\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorCustomData_create, properties.create, \"f\");\r\n        __classPrivateFieldSet(this, _HTMLElementAnchorCustomData_update, properties.update, \"f\");\r\n    }\r\n    // #endregion Constructors (1)\r\n    create(properties) {\r\n        __classPrivateFieldGet(this, _HTMLElementAnchorCustomData_create, \"f\").call(this, properties);\r\n    }\r\n    update(properties) {\r\n        __classPrivateFieldGet(this, _HTMLElementAnchorCustomData_update, \"f\").call(this, properties);\r\n    }\r\n    // #region Public Methods (1)\r\n    clone() {\r\n        return new HTMLElementAnchorCustomData({\r\n            location: this.location,\r\n            data: this.data,\r\n            hideable: this.hideable,\r\n            viewports: this.viewports,\r\n            intersectionTarget: this.intersectionTarget,\r\n            id: this.id,\r\n            version: this.version,\r\n            create: __classPrivateFieldGet(this, _HTMLElementAnchorCustomData_create, \"f\"),\r\n            update: __classPrivateFieldGet(this, _HTMLElementAnchorCustomData_update, \"f\"),\r\n        });\r\n    }\r\n}\r\nexports.HTMLElementAnchorCustomData = HTMLElementAnchorCustomData;\r\n_HTMLElementAnchorCustomData_create = new WeakMap(), _HTMLElementAnchorCustomData_update = new WeakMap();\r\n"},"sourceMaps":{"js":{"version":3,"file":"HTMLElementAnchorData.js","sourceRoot":"","sources":["../../../src/implementation/data/HTMLElementAnchorData.ts"],"names":[],"mappings":"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","sourcesContent":["import { Box } from '@shapediver/viewer.shared.math'\r\nimport { AbstractTreeNodeData, ITreeNodeData } from '@shapediver/viewer.shared.node-tree'\r\nimport { vec2, vec3 } from 'gl-matrix'\r\nimport { IAnchorDataImage, IAnchorDataText, IHTMLElementAnchorData } from '../../interfaces/data/IHTMLElementAnchorData';\r\n\r\nexport abstract class HTMLElementAnchorData extends AbstractTreeNodeData implements IHTMLElementAnchorData {\r\n    // #region Properties (9)\r\n\r\n    protected internalHtmlElement: HTMLDivElement;\r\n    readonly #viewerHtmlElement: {\r\n        [key: string]: HTMLDivElement;\r\n    } = {};\r\n\r\n    #data: IAnchorDataImage | IAnchorDataText | any;\r\n    #format: 'text' | 'image' | 'custom';\r\n    #hideable: boolean = true;\r\n    #intersectionTarget?: Box | string | string[];\r\n    #location: vec3;\r\n    #viewports: string[] = [];\r\n\r\n    // #endregion Properties (9)\r\n\r\n    // #region Constructors (1)\r\n\r\n    /**\r\n     * Creates a custom data node.\r\n     * \r\n     * @param _data the data as key- value pairs \r\n     * @param id the id\r\n     */\r\n    constructor(properties:\r\n        {\r\n            location: vec3,\r\n            data: IAnchorDataImage | IAnchorDataText | any,\r\n            format: 'text' | 'image' | 'custom',\r\n            hideable?: boolean,\r\n            viewports?: string[],\r\n            intersectionTarget?: Box | string | string[],\r\n            id?: string,\r\n            version?: string\r\n        }\r\n    ) {\r\n        super(properties.id, properties.version);\r\n\r\n        this.#location = properties.location;\r\n        this.#data = properties.data;\r\n        this.#format = properties.format;\r\n        this.#hideable = properties.hideable === undefined ? true : properties.hideable;\r\n        this.#viewports = properties.viewports || [];\r\n        this.#intersectionTarget = properties.intersectionTarget;\r\n\r\n        this.internalHtmlElement = <HTMLDivElement>document.createElement('div');\r\n        this.internalHtmlElement.style.position = 'absolute';\r\n        this.internalHtmlElement.style.whiteSpace = 'nowrap';\r\n        this.internalHtmlElement.style.textOverflow = 'clip';\r\n        this.internalHtmlElement.style.fontFamily = '\"Helvetica Neue\", Helvetica, Arial, sans-serif';\r\n    }\r\n\r\n    // #endregion Constructors (1)\r\n\r\n    // #region Public Accessors (12)\r\n\r\n    public get data(): IAnchorDataImage | IAnchorDataText | any {\r\n        return this.#data;\r\n    }\r\n\r\n    public set data(value: IAnchorDataImage | IAnchorDataText | any) {\r\n        this.#data = value;\r\n    }\r\n\r\n    public get format(): 'text' | 'image' | 'custom' {\r\n        return this.#format;\r\n    }\r\n\r\n    public set format(value: 'text' | 'image' | 'custom') {\r\n        this.#format = value;\r\n    }\r\n\r\n    public get hideable(): boolean {\r\n        return this.#hideable;\r\n    }\r\n\r\n    public set hideable(value: boolean) {\r\n        this.#hideable = value;\r\n    }\r\n\r\n    public get intersectionTarget(): Box | string | string[] | undefined {\r\n        return this.#intersectionTarget;\r\n    }\r\n\r\n    public set intersectionTarget(value: Box | string | string[] | undefined) {\r\n        this.#intersectionTarget = value;\r\n    }\r\n\r\n    public get location(): vec3 {\r\n        return this.#location;\r\n    }\r\n\r\n    public set location(value: vec3) {\r\n        this.#location = value;\r\n    }\r\n\r\n    public get viewports(): string[] {\r\n        return this.#viewports;\r\n    }\r\n\r\n    public set viewports(value: string[]) {\r\n        this.#viewports = value;\r\n    }\r\n\r\n    // #endregion Public Accessors (12)\r\n\r\n    // #region Public Methods (3)\r\n\r\n    public createViewerHtmlElement(viewer: string): HTMLDivElement | null {\r\n        if (this.#viewerHtmlElement[viewer]) return this.#viewerHtmlElement[viewer];\r\n        if (this.viewports.includes(viewer) || this.viewports.length === 0) {\r\n            this.#viewerHtmlElement[viewer] = <HTMLDivElement>this.internalHtmlElement.cloneNode(true);\r\n            this.create({ anchor: this, parent: this.#viewerHtmlElement[viewer] });\r\n            return this.#viewerHtmlElement[viewer];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public getViewerHtmlElement(viewer: string): HTMLDivElement | null {\r\n        if (this.#viewerHtmlElement[viewer]) return this.#viewerHtmlElement[viewer];\r\n        return null;\r\n    }\r\n\r\n    public abstract create(properties: { anchor: IHTMLElementAnchorData, parent: HTMLDivElement }): void;\r\n\r\n    public update(properties: {\r\n        anchor: IHTMLElementAnchorData, \r\n        htmlElement: HTMLDivElement, \r\n        page: vec2, \r\n        container: vec2, \r\n        client: vec2, \r\n        scale: vec2, \r\n        hidden: boolean,\r\n        visible: boolean\r\n    }) {\r\n        properties.htmlElement.style.display = '';\r\n        if ((this.hideable && properties.hidden) || properties.visible === false) properties.htmlElement.style.display = 'none';\r\n\r\n        let x, y;\r\n\r\n        if (this.data.position && this.data.position.horizontal === 'right') {\r\n            x = properties.container[0] - properties.htmlElement.offsetWidth;\r\n        } else if (this.data.position && this.data.position.horizontal === 'left') {\r\n            x = properties.container[0];\r\n        } else {\r\n            x = properties.container[0] - properties.htmlElement.offsetWidth / 2;\r\n        }\r\n\r\n        if (this.data.position && this.data.position.vertical === 'bottom') {\r\n            y = properties.container[1] - properties.htmlElement.offsetHeight;\r\n        } else if (this.data.position && this.data.position.vertical === 'top') {\r\n            y = properties.container[1];\r\n        } else {\r\n            y = properties.container[1] - properties.htmlElement.offsetHeight / 2;\r\n        }\r\n\r\n        x = x / properties.scale[0];\r\n        y = y / properties.scale[1];\r\n\r\n        properties.htmlElement.style.left = x + 'px';\r\n        properties.htmlElement.style.top = y + 'px';\r\n    }\r\n\r\n    // #endregion Public Methods (3)\r\n\r\n    // #region Public Abstract Methods (1)\r\n\r\n    /**\r\n     * Clones the scene graph data.\r\n     */\r\n    public abstract clone(): IHTMLElementAnchorData;\r\n\r\n    // #endregion Public Abstract Methods (1)\r\n}\r\n\r\nexport class HTMLElementAnchorTextData extends HTMLElementAnchorData {\r\n    // #region Constructors (1)\r\n\r\n    constructor(properties:\r\n        {\r\n            location: vec3,\r\n            data: IAnchorDataText,\r\n            hideable?: boolean,\r\n            viewports?: string[],\r\n            intersectionTarget?: Box | string | string[],\r\n            id?: string,\r\n            version?: string\r\n        }) {\r\n        super({\r\n            location: properties.location,\r\n            data: properties.data,\r\n            format: 'text',\r\n            hideable: properties.hideable,\r\n            viewports: properties.viewports,\r\n            intersectionTarget: properties.intersectionTarget,\r\n            id: properties.id,\r\n            version: properties.version,\r\n        })\r\n    }\r\n\r\n    // #endregion Constructors (1)\r\n\r\n    // #region Public Methods (1)\r\n\r\n    public clone(): HTMLElementAnchorTextData {\r\n        return new HTMLElementAnchorTextData({\r\n            location: this.location,\r\n            data: this.data,\r\n            hideable: this.hideable,\r\n            viewports: this.viewports,\r\n            intersectionTarget: this.intersectionTarget,\r\n            id: this.id,\r\n            version: this.version\r\n        });\r\n    }\r\n\r\n    // #endregion Public Methods (1)\r\n\r\n    // #region Private Methods (1)\r\n\r\n    public create(properties: { anchor: HTMLElementAnchorData, parent: HTMLDivElement }) {\r\n\r\n        const span = document.createElement('span');\r\n        span.style.display = 'none';\r\n        span.style.userSelect = 'none';\r\n        span.style.cursor = 'default';\r\n        span.style.pointerEvents = 'none';\r\n        span.style.color = properties.anchor.data.color?.toString();\r\n        span.innerHTML = properties.anchor.data.text;\r\n        span.style.display = 'block';\r\n        span.style.textOverflow = 'clip';\r\n        span.style.overflow = 'hidden';\r\n        properties.parent.appendChild(span);\r\n\r\n        if (properties.anchor.data.textAlign && (properties.anchor.data.textAlign === 'right' || properties.anchor.data.textAlign === 'center')) {\r\n            span.style.textAlign = properties.anchor.data.textAlign;\r\n        } else {\r\n            span.style.textAlign = 'left';\r\n        }\r\n    }\r\n\r\n    // #endregion Private Methods (1)\r\n}\r\n\r\nexport class HTMLElementAnchorImageData extends HTMLElementAnchorData {\r\n    // #region Constructors (1)\r\n\r\n    constructor(properties:\r\n        {\r\n            location: vec3,\r\n            data: IAnchorDataImage,\r\n            hideable?: boolean,\r\n            viewports?: string[],\r\n            intersectionTarget?: Box | string | string[],\r\n            id?: string,\r\n            version?: string\r\n        }) {\r\n        super({\r\n            location: properties.location,\r\n            data: properties.data,\r\n            format: 'image',\r\n            hideable: properties.hideable,\r\n            viewports: properties.viewports,\r\n            intersectionTarget: properties.intersectionTarget,\r\n            id: properties.id,\r\n            version: properties.version\r\n        })\r\n    }\r\n\r\n    // #endregion Constructors (1)\r\n\r\n    // #region Public Methods (1)\r\n\r\n    public clone(): HTMLElementAnchorImageData {\r\n        return new HTMLElementAnchorImageData({\r\n            location: this.location,\r\n            data: this.data,\r\n            hideable: this.hideable,\r\n            viewports: this.viewports,\r\n            intersectionTarget: this.intersectionTarget,\r\n            id: this.id,\r\n            version: this.version\r\n        });\r\n    }\r\n\r\n    // #endregion Public Methods (1)\r\n\r\n    // #region Private Methods (1)\r\n\r\n    public create(properties: { anchor: HTMLElementAnchorData, parent: HTMLDivElement }) {\r\n        \r\n        const img = document.createElement('img');\r\n        img.style.userSelect = 'none';\r\n        img.style.cursor = 'default';\r\n        img.style.pointerEvents = 'none';\r\n        properties.parent.appendChild(img);\r\n        img.src = properties.anchor.data.src;\r\n        if (properties.anchor.data.height) img.height = properties.anchor.data.height;\r\n        if (properties.anchor.data.width) img.width = properties.anchor.data.width;\r\n        if (properties.anchor.data.alt) img.alt = properties.anchor.data.alt;\r\n    }\r\n \r\n    // #endregion Private Methods (1)\r\n}\r\n\r\nexport class HTMLElementAnchorCustomData extends HTMLElementAnchorData {\r\n    // #region Properties (1)\r\n\r\n    readonly #create: (properties: { anchor: HTMLElementAnchorData, parent: HTMLDivElement }) => void;\r\n    readonly #update: (properties: { anchor: HTMLElementAnchorData, htmlElement: HTMLDivElement, page: vec2, container: vec2, client: vec2, scale: vec2, hidden: boolean, visible: boolean }) => void;\r\n\r\n    // #endregion Properties (1)\r\n\r\n    // #region Constructors (1)\r\n\r\n    constructor(properties:\r\n        {\r\n            location: vec3,\r\n            data: any,\r\n            hideable?: boolean,\r\n            viewports?: string[],\r\n            intersectionTarget?: Box | string | string[],\r\n            id?: string,\r\n            version?: string\r\n            create: (properties: { anchor: HTMLElementAnchorData, parent: HTMLDivElement }) => void,\r\n            update: (properties: { anchor: HTMLElementAnchorData, htmlElement: HTMLDivElement, page: vec2, container: vec2, client: vec2, scale: vec2, hidden: boolean, visible: boolean }) => void\r\n        }) {\r\n        super({\r\n            location: properties.location,\r\n            data: properties.data,\r\n            format: 'custom',\r\n            hideable: properties.hideable,\r\n            viewports: properties.viewports,\r\n            intersectionTarget: properties.intersectionTarget,\r\n            id: properties.id,\r\n            version: properties.version\r\n        })\r\n\r\n        this.#create = properties.create;\r\n        this.#update = properties.update;\r\n    }\r\n\r\n    // #endregion Constructors (1)\r\n\r\n    public create(properties: { anchor: HTMLElementAnchorData, parent: HTMLDivElement }) {\r\n        this.#create(properties)\r\n    }\r\n\r\n    public update(properties: { anchor: HTMLElementAnchorData, htmlElement: HTMLDivElement, page: vec2, container: vec2, client: vec2, scale: vec2, hidden: boolean, visible: boolean }) {\r\n        this.#update(properties)\r\n    }\r\n\r\n    // #region Public Methods (1)\r\n\r\n    public clone(): HTMLElementAnchorCustomData {\r\n        return new HTMLElementAnchorCustomData({\r\n            location: this.location,\r\n            data: this.data,\r\n            hideable: this.hideable,\r\n            viewports: this.viewports,\r\n            intersectionTarget: this.intersectionTarget,\r\n            id: this.id,\r\n            version: this.version,\r\n            create: this.#create,\r\n            update: this.#update,\r\n        });\r\n    }\r\n\r\n    // #endregion Public Methods (1)\r\n}"]}},"error":null,"hash":"3d74c332beedc6b0b6adf3ff55c23d8c","cacheData":{"env":{}}}