{"id":"RL3K","dependencies":[{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine-threejs.standard\\dist\\materials\\SpecularGlossinessMaterial.js.map","includedInParent":true,"mtime":1706476152471},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine-threejs.standard\\src\\materials\\SpecularGlossinessMaterial.ts","includedInParent":true,"mtime":1706476153063},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\package.json","includedInParent":true,"mtime":1706476652643},{"name":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine-threejs.standard\\package.json","includedInParent":true,"mtime":1706476151754},{"name":"three","loc":{"line":24,"column":24,"index":1074},"parent":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\@shapediver\\viewer.rendering-engine-threejs.standard\\dist\\materials\\SpecularGlossinessMaterial.js","resolved":"F:\\UpworkProjects\\ShapeDiverLight\\ShapeDiverLight\\shapediverlight.client\\node_modules\\three\\build\\three.module.js"}],"generated":{"js":"\"use strict\";var e=this&&this.__createBinding||(Object.create?function(e,s,t,a){void 0===a&&(a=t),Object.defineProperty(e,a,{enumerable:!0,get:function(){return s[t]}})}:function(e,s,t,a){void 0===a&&(a=t),e[a]=s[t]}),s=this&&this.__setModuleDefault||(Object.create?function(e,s){Object.defineProperty(e,\"default\",{enumerable:!0,value:s})}:function(e,s){e.default=s}),t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var r in t)\"default\"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&e(a,t,r);return s(a,t),a};Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.SpecularGlossinessMaterial=void 0;const a=t(require(\"three\")),r=require(\"three\");class l extends r.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const s=[\"#ifdef USE_SPECULARMAP\",\"\\tuniform sampler2D specularMap;\",\"#endif\"].join(\"\\n\"),t=[\"#ifdef USE_GLOSSINESSMAP\",\"\\tuniform sampler2D glossinessMap;\",\"#endif\"].join(\"\\n\"),r=[\"vec3 specularFactor = specular;\",\"#ifdef USE_SPECULARMAP\",\"\\tvec4 texelSpecular = texture2D( specularMap, vUv );\",\"\\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\",\"\\tspecularFactor *= texelSpecular.rgb;\",\"#endif\"].join(\"\\n\"),l=[\"float glossinessFactor = glossiness;\",\"#ifdef USE_GLOSSINESSMAP\",\"\\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );\",\"\\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\",\"\\tglossinessFactor *= texelGlossiness.a;\",\"#endif\"].join(\"\\n\"),n=[\"PhysicalMaterial material;\",\"material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );\",\"vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\",\"float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\",\"material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.\",\"material.roughness += geometryRoughness;\",\"material.roughness = min( material.roughness, 1.0 );\",\"material.specularColor = specularFactor;\"].join(\"\\n\"),i={specular:{value:(new a.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=i,this.onBeforeCompile=function(e){for(const s in i)e.uniforms[s]=i[s];e.fragmentShader=e.fragmentShader.replace(\"uniform float roughness;\",\"uniform vec3 specular;\").replace(\"uniform float metalness;\",\"uniform float glossiness;\").replace(\"#include <roughnessmap_pars_fragment>\",s).replace(\"#include <metalnessmap_pars_fragment>\",t).replace(\"#include <roughnessmap_fragment>\",r).replace(\"#include <metalnessmap_fragment>\",l).replace(\"#include <lights_physical_fragment>\",n)},Object.defineProperties(this,{specular:{get:function(){return i.specular.value},set:function(e){i.specular.value=e}},specularMap:{get:function(){return i.specularMap.value},set:function(e){i.specularMap.value=e,e?this.defines.USE_SPECULARMAP=\"\":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return i.glossiness.value},set:function(e){i.glossiness.value=e}},glossinessMap:{get:function(){return i.glossinessMap.value},set:function(e){i.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP=\"\",this.defines.USE_UV=\"\"):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}exports.SpecularGlossinessMaterial=l;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":651}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":657}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":659}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":661}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":669}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":679}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":681}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":689}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":1,"column":698}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":1,"column":704}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":15,"column":48},"generated":{"line":1,"column":714}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":15,"column":48},"generated":{"line":1,"column":716}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":24,"column":4},"generated":{"line":1,"column":737}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":24,"column":16},"generated":{"line":1,"column":749}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":1,"column":752}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":760}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":1,"column":765}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":27,"column":48},"generated":{"line":1,"column":799}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":801}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":30,"column":14},"generated":{"line":1,"column":807}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":30,"column":45},"generated":{"line":1,"column":809}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":31,"column":12},"generated":{"line":1,"column":810}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":32,"column":12},"generated":{"line":1,"column":835}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":33,"column":12},"generated":{"line":1,"column":870}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":34,"column":10},"generated":{"line":1,"column":880}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":34,"column":15},"generated":{"line":1,"column":885}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":36,"column":14},"generated":{"line":1,"column":891}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":36,"column":47},"generated":{"line":1,"column":893}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":37,"column":12},"generated":{"line":1,"column":894}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":38,"column":12},"generated":{"line":1,"column":921}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":1,"column":958}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":40,"column":10},"generated":{"line":1,"column":968}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":40,"column":15},"generated":{"line":1,"column":973}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":42,"column":14},"generated":{"line":1,"column":979}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":42,"column":41},"generated":{"line":1,"column":981}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":43,"column":12},"generated":{"line":1,"column":982}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":44,"column":12},"generated":{"line":1,"column":1016}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":45,"column":12},"generated":{"line":1,"column":1041}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":46,"column":12},"generated":{"line":1,"column":1097}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":1181}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":48,"column":12},"generated":{"line":1,"column":1222}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":1232}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":49,"column":15},"generated":{"line":1,"column":1237}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":51,"column":14},"generated":{"line":1,"column":1243}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":51,"column":43},"generated":{"line":1,"column":1245}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":52,"column":12},"generated":{"line":1,"column":1246}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":53,"column":12},"generated":{"line":1,"column":1285}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":1312}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":1372}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":1454}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":1497}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":58,"column":10},"generated":{"line":1,"column":1507}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":58,"column":15},"generated":{"line":1,"column":1512}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":60,"column":14},"generated":{"line":1,"column":1518}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":60,"column":43},"generated":{"line":1,"column":1520}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":61,"column":12},"generated":{"line":1,"column":1521}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":1550}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":1672}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":1754}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":65,"column":12},"generated":{"line":1,"column":1817}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":66,"column":12},"generated":{"line":1,"column":1935}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":1,"column":1978}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":68,"column":12},"generated":{"line":1,"column":2033}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":69,"column":10},"generated":{"line":1,"column":2077}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":69,"column":15},"generated":{"line":1,"column":2082}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":71,"column":14},"generated":{"line":1,"column":2088}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":71,"column":60},"generated":{"line":1,"column":2090}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":2091}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":72,"column":22},"generated":{"line":1,"column":2100}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":72,"column":24},"generated":{"line":1,"column":2101}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":72,"column":31},"generated":{"line":1,"column":2108}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":1,"column":2112}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":72,"column":41},"generated":{"line":1,"column":2114}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":72,"column":49},"generated":{"line":1,"column":2121}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":72,"column":56},"generated":{"line":1,"column":2128}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":73,"column":12},"generated":{"line":1,"column":2139}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":73,"column":24},"generated":{"line":1,"column":2150}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":73,"column":26},"generated":{"line":1,"column":2151}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":73,"column":33},"generated":{"line":1,"column":2157}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":74,"column":12},"generated":{"line":1,"column":2160}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":74,"column":25},"generated":{"line":1,"column":2172}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":74,"column":27},"generated":{"line":1,"column":2173}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":74,"column":34},"generated":{"line":1,"column":2179}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":75,"column":12},"generated":{"line":1,"column":2185}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":75,"column":27},"generated":{"line":1,"column":2199}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":2200}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":75,"column":36},"generated":{"line":1,"column":2206}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":78,"column":14},"generated":{"line":1,"column":2213}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":78,"column":20},"generated":{"line":1,"column":2218}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":78,"column":37},"generated":{"line":1,"column":2233}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":80,"column":8},"generated":{"line":1,"column":2235}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":80,"column":13},"generated":{"line":1,"column":2240}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":80,"column":31},"generated":{"line":1,"column":2256}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":80,"column":41},"generated":{"line":1,"column":2265}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":81,"column":12},"generated":{"line":1,"column":2268}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":81,"column":17},"generated":{"line":1,"column":2272}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":81,"column":23},"generated":{"line":1,"column":2278}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":81,"column":38},"generated":{"line":1,"column":2283}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":82,"column":16},"generated":{"line":1,"column":2285}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":82,"column":23},"generated":{"line":1,"column":2287}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":82,"column":32},"generated":{"line":1,"column":2296}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":82,"column":47},"generated":{"line":1,"column":2299}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":82,"column":56},"generated":{"line":1,"column":2301}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":85,"column":12},"generated":{"line":1,"column":2304}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":85,"column":19},"generated":{"line":1,"column":2306}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":85,"column":36},"generated":{"line":1,"column":2321}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":85,"column":43},"generated":{"line":1,"column":2323}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":86,"column":17},"generated":{"line":1,"column":2338}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":86,"column":25},"generated":{"line":1,"column":2346}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":86,"column":53},"generated":{"line":1,"column":2373}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":87,"column":17},"generated":{"line":1,"column":2399}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":87,"column":25},"generated":{"line":1,"column":2407}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":87,"column":53},"generated":{"line":1,"column":2434}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":88,"column":17},"generated":{"line":1,"column":2463}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":88,"column":25},"generated":{"line":1,"column":2471}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":88,"column":66},"generated":{"line":1,"column":2511}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":89,"column":17},"generated":{"line":1,"column":2514}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":89,"column":25},"generated":{"line":1,"column":2522}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":89,"column":66},"generated":{"line":1,"column":2562}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":90,"column":17},"generated":{"line":1,"column":2565}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":90,"column":25},"generated":{"line":1,"column":2573}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":90,"column":61},"generated":{"line":1,"column":2608}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":91,"column":17},"generated":{"line":1,"column":2611}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":91,"column":25},"generated":{"line":1,"column":2619}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":91,"column":61},"generated":{"line":1,"column":2654}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":92,"column":17},"generated":{"line":1,"column":2657}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":92,"column":25},"generated":{"line":1,"column":2665}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":92,"column":64},"generated":{"line":1,"column":2703}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":96,"column":8},"generated":{"line":1,"column":2707}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":96,"column":15},"generated":{"line":1,"column":2714}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":96,"column":32},"generated":{"line":1,"column":2731}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":96,"column":38},"generated":{"line":1,"column":2736}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":1,"column":2737}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":97,"column":22},"generated":{"line":1,"column":2746}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":98,"column":16},"generated":{"line":1,"column":2747}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":98,"column":21},"generated":{"line":1,"column":2751}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":99,"column":20},"generated":{"line":1,"column":2762}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":99,"column":27},"generated":{"line":1,"column":2769}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":99,"column":36},"generated":{"line":1,"column":2771}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":99,"column":45},"generated":{"line":1,"column":2780}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":102,"column":16},"generated":{"line":1,"column":2787}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":102,"column":21},"generated":{"line":1,"column":2791}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":102,"column":31},"generated":{"line":1,"column":2800}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":103,"column":20},"generated":{"line":1,"column":2803}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":103,"column":29},"generated":{"line":1,"column":2805}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":103,"column":38},"generated":{"line":1,"column":2814}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":103,"column":46},"generated":{"line":1,"column":2820}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":107,"column":12},"generated":{"line":1,"column":2824}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":107,"column":25},"generated":{"line":1,"column":2836}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":108,"column":16},"generated":{"line":1,"column":2837}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":108,"column":21},"generated":{"line":1,"column":2841}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":109,"column":20},"generated":{"line":1,"column":2852}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":109,"column":27},"generated":{"line":1,"column":2859}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":109,"column":36},"generated":{"line":1,"column":2861}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":109,"column":48},"generated":{"line":1,"column":2873}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":112,"column":16},"generated":{"line":1,"column":2880}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":112,"column":21},"generated":{"line":1,"column":2884}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":112,"column":31},"generated":{"line":1,"column":2893}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":113,"column":20},"generated":{"line":1,"column":2896}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":113,"column":29},"generated":{"line":1,"column":2898}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":113,"column":41},"generated":{"line":1,"column":2910}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":113,"column":49},"generated":{"line":1,"column":2916}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":115,"column":24},"generated":{"line":1,"column":2918}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":116,"column":24},"generated":{"line":1,"column":2920}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":116,"column":29},"generated":{"line":1,"column":2925}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":116,"column":37},"generated":{"line":1,"column":2933}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":116,"column":55},"generated":{"line":1,"column":2949}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":119,"column":31},"generated":{"line":1,"column":2959}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":119,"column":36},"generated":{"line":1,"column":2964}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":119,"column":44},"generated":{"line":1,"column":2972}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":124,"column":12},"generated":{"line":1,"column":2990}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":124,"column":24},"generated":{"line":1,"column":3001}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":125,"column":16},"generated":{"line":1,"column":3002}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":125,"column":21},"generated":{"line":1,"column":3006}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":126,"column":20},"generated":{"line":1,"column":3017}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":126,"column":27},"generated":{"line":1,"column":3024}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":126,"column":36},"generated":{"line":1,"column":3026}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":126,"column":47},"generated":{"line":1,"column":3037}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":129,"column":16},"generated":{"line":1,"column":3044}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":129,"column":21},"generated":{"line":1,"column":3048}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":129,"column":31},"generated":{"line":1,"column":3057}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":130,"column":20},"generated":{"line":1,"column":3060}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":130,"column":29},"generated":{"line":1,"column":3062}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":130,"column":40},"generated":{"line":1,"column":3073}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":130,"column":48},"generated":{"line":1,"column":3079}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":134,"column":12},"generated":{"line":1,"column":3083}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":134,"column":27},"generated":{"line":1,"column":3097}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":135,"column":16},"generated":{"line":1,"column":3098}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":135,"column":21},"generated":{"line":1,"column":3102}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":1,"column":3113}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":136,"column":27},"generated":{"line":1,"column":3120}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":136,"column":36},"generated":{"line":1,"column":3122}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":136,"column":50},"generated":{"line":1,"column":3136}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":139,"column":16},"generated":{"line":1,"column":3143}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":139,"column":21},"generated":{"line":1,"column":3147}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":139,"column":31},"generated":{"line":1,"column":3156}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":140,"column":20},"generated":{"line":1,"column":3159}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":140,"column":29},"generated":{"line":1,"column":3161}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":140,"column":43},"generated":{"line":1,"column":3175}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":140,"column":51},"generated":{"line":1,"column":3181}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":142,"column":24},"generated":{"line":1,"column":3183}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":143,"column":24},"generated":{"line":1,"column":3186}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":143,"column":29},"generated":{"line":1,"column":3191}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":143,"column":37},"generated":{"line":1,"column":3199}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":143,"column":57},"generated":{"line":1,"column":3217}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":144,"column":24},"generated":{"line":1,"column":3220}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":144,"column":29},"generated":{"line":1,"column":3225}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":144,"column":37},"generated":{"line":1,"column":3233}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":144,"column":46},"generated":{"line":1,"column":3240}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":147,"column":31},"generated":{"line":1,"column":3252}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":147,"column":36},"generated":{"line":1,"column":3257}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":147,"column":44},"generated":{"line":1,"column":3265}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":148,"column":31},"generated":{"line":1,"column":3290}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":148,"column":36},"generated":{"line":1,"column":3295}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":148,"column":44},"generated":{"line":1,"column":3303}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":155,"column":21},"generated":{"line":1,"column":3322}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":155,"column":27},"generated":{"line":1,"column":3327}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":156,"column":21},"generated":{"line":1,"column":3344}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":156,"column":27},"generated":{"line":1,"column":3349}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":157,"column":21},"generated":{"line":1,"column":3366}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":157,"column":27},"generated":{"line":1,"column":3371}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":158,"column":21},"generated":{"line":1,"column":3391}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":158,"column":27},"generated":{"line":1,"column":3396}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":160,"column":8},"generated":{"line":1,"column":3409}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":160,"column":13},"generated":{"line":1,"column":3414}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":160,"column":23},"generated":{"line":1,"column":3424}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":167,"column":11},"generated":{"line":1,"column":3427}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":167,"column":16},"generated":{"line":1,"column":3432}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":178,"column":8},"generated":{"line":1,"column":3435}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":168,"column":8},"generated":{"line":1,"column":3442}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":168,"column":14},"generated":{"line":1,"column":3448}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":168,"column":19},"generated":{"line":1,"column":3453}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":170,"column":14},"generated":{"line":1,"column":3456}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":170,"column":20},"generated":{"line":1,"column":3461}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":170,"column":40},"generated":{"line":1,"column":3473}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":170,"column":48},"generated":{"line":1,"column":3475}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":171,"column":14},"generated":{"line":1,"column":3487}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":171,"column":20},"generated":{"line":1,"column":3492}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":171,"column":29},"generated":{"line":1,"column":3501}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":171,"column":40},"generated":{"line":1,"column":3506}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":171,"column":48},"generated":{"line":1,"column":3508}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":172,"column":14},"generated":{"line":1,"column":3518}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":172,"column":20},"generated":{"line":1,"column":3523}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":172,"column":42},"generated":{"line":1,"column":3537}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":172,"column":50},"generated":{"line":1,"column":3539}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":173,"column":14},"generated":{"line":1,"column":3553}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":173,"column":20},"generated":{"line":1,"column":3558}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":173,"column":39},"generated":{"line":1,"column":3569}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":173,"column":47},"generated":{"line":1,"column":3571}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":174,"column":21},"generated":{"line":1,"column":3589}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":174,"column":27},"generated":{"line":1,"column":3594}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":175,"column":21},"generated":{"line":1,"column":3611}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":175,"column":27},"generated":{"line":1,"column":3616}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":176,"column":21},"generated":{"line":1,"column":3633}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":176,"column":27},"generated":{"line":1,"column":3638}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":177,"column":21},"generated":{"line":1,"column":3658}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":177,"column":27},"generated":{"line":1,"column":3663}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":178,"column":15},"generated":{"line":1,"column":3676}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":1,"column":3682}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":1,"column":3690}},{"source":"../../src/materials/SpecularGlossinessMaterial.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":1,"column":3717}}],"sources":{"../../src/materials/SpecularGlossinessMaterial.ts":"import * as THREE from 'three';\r\nimport { MeshStandardMaterial, MeshStandardMaterialParameters } from 'three';\r\n\r\nexport interface SpecularGlossinessMaterialParameters extends MeshStandardMaterialParameters {\r\n    // #region Properties (4)\r\n\r\n    glossiness?: number | undefined;\r\n    glossinessMap?: THREE.Texture | null | undefined;\r\n    specular?: THREE.ColorRepresentation | undefined;\r\n    specularMap?: THREE.Texture | null | undefined;\r\n\r\n    // #endregion Properties (4)\r\n}\r\n\r\nexport class SpecularGlossinessMaterial extends MeshStandardMaterial {\r\n    // #region Properties (1)\r\n\r\n    public isGLTFSpecularGlossinessMaterial: boolean;\r\n\r\n    // #endregion Properties (1)\r\n\r\n    // #region Constructors (1)\r\n\r\n    constructor(params: SpecularGlossinessMaterialParameters) {\r\n        super();\r\n\r\n        this.isGLTFSpecularGlossinessMaterial = true;\r\n\r\n        //various chunks that need replacing\r\n        const specularMapParsFragmentChunk = [\r\n            '#ifdef USE_SPECULARMAP',\r\n            '\tuniform sampler2D specularMap;',\r\n            '#endif'\r\n        ].join('\\n');\r\n\r\n        const glossinessMapParsFragmentChunk = [\r\n            '#ifdef USE_GLOSSINESSMAP',\r\n            '\tuniform sampler2D glossinessMap;',\r\n            '#endif'\r\n        ].join('\\n');\r\n\r\n        const specularMapFragmentChunk = [\r\n            'vec3 specularFactor = specular;',\r\n            '#ifdef USE_SPECULARMAP',\r\n            '\tvec4 texelSpecular = texture2D( specularMap, vUv );',\r\n            '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n            '\tspecularFactor *= texelSpecular.rgb;',\r\n            '#endif'\r\n        ].join('\\n');\r\n\r\n        const glossinessMapFragmentChunk = [\r\n            'float glossinessFactor = glossiness;',\r\n            '#ifdef USE_GLOSSINESSMAP',\r\n            '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\r\n            '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n            '\tglossinessFactor *= texelGlossiness.a;',\r\n            '#endif'\r\n        ].join('\\n');\r\n\r\n        const lightPhysicalFragmentChunk = [\r\n            'PhysicalMaterial material;',\r\n            'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\r\n            'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\r\n            'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\r\n            'material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\r\n            'material.roughness += geometryRoughness;',\r\n            'material.roughness = min( material.roughness, 1.0 );',\r\n            'material.specularColor = specularFactor;',\r\n        ].join('\\n');\r\n\r\n        const uniforms: { [key: string]: { value: any } } = {\r\n            specular: { value: new THREE.Color().setHex(0xffffff) },\r\n            glossiness: { value: 1 },\r\n            specularMap: { value: null },\r\n            glossinessMap: { value: null }\r\n        };\r\n\r\n        (<any>this)._extraUniforms = uniforms;\r\n\r\n        this.onBeforeCompile = function (shader) {\r\n            for (const uniformName in uniforms) {\r\n                shader.uniforms[uniformName] = uniforms[uniformName];\r\n            }\r\n\r\n            shader.fragmentShader = shader.fragmentShader\r\n                .replace('uniform float roughness;', 'uniform vec3 specular;')\r\n                .replace('uniform float metalness;', 'uniform float glossiness;')\r\n                .replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk)\r\n                .replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk)\r\n                .replace('#include <roughnessmap_fragment>', specularMapFragmentChunk)\r\n                .replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk)\r\n                .replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk);\r\n\r\n        };\r\n\r\n        Object.defineProperties(this, {\r\n            specular: {\r\n                get: function () {\r\n                    return uniforms.specular.value;\r\n\r\n                },\r\n                set: function (v) {\r\n                    uniforms.specular.value = v;\r\n                }\r\n            },\r\n\r\n            specularMap: {\r\n                get: function () {\r\n                    return uniforms.specularMap.value;\r\n\r\n                },\r\n                set: function (v) {\r\n                    uniforms.specularMap.value = v;\r\n\r\n                    if (v) {\r\n                        this.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\r\n\r\n                    } else {\r\n                        delete this.defines.USE_SPECULARMAP;\r\n                    }\r\n                }\r\n            },\r\n\r\n            glossiness: {\r\n                get: function () {\r\n                    return uniforms.glossiness.value;\r\n\r\n                },\r\n                set: function (v) {\r\n                    uniforms.glossiness.value = v;\r\n                }\r\n            },\r\n\r\n            glossinessMap: {\r\n                get: function () {\r\n                    return uniforms.glossinessMap.value;\r\n\r\n                },\r\n                set: function (v) {\r\n                    uniforms.glossinessMap.value = v;\r\n\r\n                    if (v) {\r\n                        this.defines.USE_GLOSSINESSMAP = '';\r\n                        this.defines.USE_UV = '';\r\n\r\n                    } else {\r\n                        delete this.defines.USE_GLOSSINESSMAP;\r\n                        delete this.defines.USE_UV;\r\n                    }\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        delete (<any>this).metalness;\r\n        delete (<any>this).roughness;\r\n        delete (<any>this).metalnessMap;\r\n        delete (<any>this).roughnessMap;\r\n\r\n        this.setValues(params);\r\n    }\r\n\r\n    // #endregion Constructors (1)\r\n\r\n    // #region Public Methods (1)\r\n\r\n    public copy(source: SpecularGlossinessMaterial) {\r\n        super.copy(source);\r\n\r\n        (<any>this).specularMap = (<any>source).specularMap;\r\n        (<any>this).specular.copy((<any>source).specular);\r\n        (<any>this).glossinessMap = (<any>source).glossinessMap;\r\n        (<any>this).glossiness = (<any>source).glossiness;\r\n        delete (<any>this).metalness;\r\n        delete (<any>this).roughness;\r\n        delete (<any>this).metalnessMap;\r\n        delete (<any>this).roughnessMap;\r\n        return this;\r\n    }\r\n\r\n    // #endregion Public Methods (1)\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"ee44465f74a062dce5d91cf458360834","cacheData":{"env":{}}}